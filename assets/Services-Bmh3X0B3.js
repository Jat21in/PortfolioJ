import{r as D,j as y}from"./index-B3pm4JKl.js";import{R as Yn,T as Cs,a as Un,b as wr,c as qt,I as vs,S as St,D as Sr,d as Es,P as Ms,V as ee,e as _t,f as Tt,Q as gt,g as Bn,O as Qt,h as dr,i as Pe,L as Wn,j as Xt,F as lt,k as Ve,l as ys,m as Is,n as Rs,o as bt,M as ze,p as Fs,q as _s,r as Lr,s as Ts,t as Ds,B as Zt,v as bs,w as we,x as Hr,y as Jn,z as xs,A as Dn,E as Gs,G as Pr,H as ws,J as Or,K as Ss,N as Ls,U as Hs,W as Ps,X as Os,Y as bn,Z as Yt,$ as Us,a0 as Js,a1 as Ns,a2 as Ur,a3 as Ct,a4 as Nn,a5 as ks,a6 as js,a7 as Ks,a8 as tt,a9 as Qs,aa as Xs,ab as Zs,ac as Ys,ad as nt,ae as mr,af as fr,ag as pr,ah as Vn,ai as Jr,aj as Ws,ak as Nr,al as Se,am as We,an as xt,ao as Vt,ap as Vs,aq as zs,ar as vt,as as pe,at as Et,au as qs,u as Lt,_ as Ye,av as kr,aw as zn,ax as gn,ay as $s,az as eo,aA as kn,aB as to,aC as no,aD as ro,aE as so,aF as jn,aG as oo,aH as Br,aI as ao,aJ as io,aK as co,aL as lo,aM as uo,aN as ho,aO as Ao,aP as jr,aQ as gr,aR as mo,aS as fo,C as qn}from"./extends-Dt6ZGmFu.js";import{u as Kr}from"./use-in-view-CQByIeEK.js";import{c as po,a as Bo,b as go,r as Co,i as vo,d as Eo,e as Mo,f as Qr,g as yo,h as Io,j as Ro,p as Fo,s as _o,V as To,k as Do,l as bo,S as xo,H as Go,v as Cn,n as wo,o as So,q as Lo,G as Ho,m as xn}from"./proxy-DKrypm7z.js";function Po(a,e=100,t){const n=t({...a,keyframes:[0,e]}),r=Math.min(po(n),Bo);return{type:"keyframes",ease:s=>n.next(r*s).value/e,duration:go(r)}}function $n(a){return typeof a=="object"&&!Array.isArray(a)}function Xr(a,e,t,n){return typeof a=="string"&&$n(e)?Co(a,t,n):a instanceof NodeList?Array.from(a):Array.isArray(a)?a:[a]}function Cr(a,e,t,n){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,a+parseFloat(e)):e==="<"?t:(r=n.get(e))!==null&&r!==void 0?r:a}const Oo=(a,e,t)=>{const n=e-a;return((t-a)%n+n)%n+a};function Zr(a,e){return vo(a)?a[Oo(0,a.length,e)]:a}function Uo(a,e,t){for(let n=0;n<a.length;n++){const r=a[n];r.at>e&&r.at<t&&(Mo(a,r),n--)}}function Jo(a,e,t,n,r,s){Uo(a,r,s);for(let o=0;o<e.length;o++)a.push({value:e[o],at:Eo(r,s,n[o]),easing:Zr(t,o)})}function No(a,e){return a.at===e.at?a.value===null?1:e.value===null?-1:0:a.at-e.at}function ko(a,e){for(let t=0;t<a.length;t++)a[t]=a[t]/(e+1)}function jo(a,e,t){return a*(e+1)}const Ko="easeInOut";function Qo(a,{defaultTransition:e={},...t}={},n,r){const s=e.duration||.3,o=new Map,l=new Map,c={},u=new Map;let d=0,A=0,m=0;for(let B=0;B<a.length;B++){const C=a[B];if(typeof C=="string"){u.set(C,A);continue}else if(!Array.isArray(C)){u.set(C.name,Cr(A,C.at,d,u));continue}let[v,g,I={}]=C;I.at!==void 0&&(A=Cr(A,I.at,d,u));let R=0;const S=(G,T,E,w=0,b=0)=>{const x=Xo(G),{delay:P=0,times:Z=yo(x),type:z="keyframes",repeat:V,repeatType:K,repeatDelay:ne=0,...q}=T;let{ease:he=e.ease||"easeOut",duration:ce}=T;const ye=typeof P=="function"?P(w,b):P,se=x.length,Me=Io(z)?z:r==null?void 0:r[z];if(se<=2&&Me){let Le=100;if(se===2&&Wo(x)){const Fe=x[1]-x[0];Le=Math.abs(Fe)}const oe={...q};ce!==void 0&&(oe.duration=_o(ce));const De=Po(oe,Le,Me);he=De.ease,ce=De.duration}ce??(ce=s);const le=A+ye;Z.length===1&&Z[0]===0&&(Z[1]=1);const Ce=Z.length-x.length;if(Ce>0&&Ro(Z,Ce),x.length===1&&x.unshift(null),V){ce=jo(ce,V);const Le=[...x],oe=[...Z];he=Array.isArray(he)?[...he]:[he];const De=[...he];for(let Fe=0;Fe<V;Fe++){x.push(...Le);for(let qe=0;qe<Le.length;qe++)Z.push(oe[qe]+(Fe+1)),he.push(qe===0?"linear":Zr(De,qe-1))}ko(Z,V)}const Te=le+ce;Jo(E,x,he,Z,le,Te),R=Math.max(ye+ce,R),m=Math.max(Te,m)};if(Qr(v)){const G=vr(v,l);S(g,I,Er("default",G))}else{const G=Xr(v,g,n,c),T=G.length;for(let E=0;E<T;E++){g=g,I=I;const w=G[E],b=vr(w,l);for(const x in g)S(g[x],Zo(I,x),Er(x,b),E,T)}}d=A,A+=R}return l.forEach((B,C)=>{for(const v in B){const g=B[v];g.sort(No);const I=[],R=[],S=[];for(let T=0;T<g.length;T++){const{at:E,value:w,easing:b}=g[T];I.push(w),R.push(Fo(0,m,E)),S.push(b||"easeOut")}R[0]!==0&&(R.unshift(0),I.unshift(I[0]),S.unshift(Ko)),R[R.length-1]!==1&&(R.push(1),I.push(null)),o.has(C)||o.set(C,{keyframes:{},transition:{}});const G=o.get(C);G.keyframes[v]=I,G.transition[v]={...e,duration:m,ease:S,times:R,...t}}}),o}function vr(a,e){return!e.has(a)&&e.set(a,{}),e.get(a)}function Er(a,e){return e[a]||(e[a]=[]),e[a]}function Xo(a){return Array.isArray(a)?a:[a]}function Zo(a,e){return a&&a[e]?{...a,...a[e]}:{...a}}const Yo=a=>typeof a=="number",Wo=a=>a.every(Yo);function Vo(a,e){return a in e}class zo extends To{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(Vo(t,e)){const n=e[t];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return Do()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function qo(a){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=bo(a)?new xo(e):new Go(e);t.mount(a),Cn.set(a,t)}function $o(a){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new zo(e);t.mount(a),Cn.set(a,t)}function ea(a,e){return Qr(a)||typeof a=="number"||typeof a=="string"&&!$n(e)}function Yr(a,e,t,n){const r=[];if(ea(a,e))r.push(wo(a,$n(e)&&e.default||e,t&&(t.default||t)));else{const s=Xr(a,e,n),o=s.length;for(let l=0;l<o;l++){const c=s[l],u=c instanceof Element?qo:$o;Cn.has(c)||u(c);const d=Cn.get(c),A={...t};"delay"in A&&typeof A.delay=="function"&&(A.delay=A.delay(l,o)),r.push(...So(d,{...e,transition:A},{}))}}return r}function ta(a,e,t){const n=[];return Qo(a,e,t,{spring:Lo}).forEach(({keyframes:s,transition:o},l)=>{n.push(...Yr(l,s,o))}),n}function na(a){return Array.isArray(a)&&Array.isArray(a[0])}function ra(a){function e(t,n,r){let s=[];return na(t)?s=ta(t,n,a):s=Yr(t,n,r,a),new Ho(s)}return e}const sa=ra(),oa=parseInt(Yn.replace(/\D+/g,""));function Mr(a,e){if(e===Cs)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(e===Un||e===wr){let t=a.getIndex();if(t===null){const o=[],l=a.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)o.push(c);a.setIndex(o),t=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const n=t.count-2,r=[];if(t)if(e===Un)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=a.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),a}var ke=Uint8Array,ct=Uint16Array,Kn=Uint32Array,Wr=new ke([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vr=new ke([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aa=new ke([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zr=function(a,e){for(var t=new ct(31),n=0;n<31;++n)t[n]=e+=1<<a[n-1];for(var r=new Kn(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)r[s]=s-t[n]<<5|n;return[t,r]},qr=zr(Wr,2),$r=qr[0],ia=qr[1];$r[28]=258,ia[258]=28;var ca=zr(Vr,0),la=ca[0],Qn=new ct(32768);for(var ge=0;ge<32768;++ge){var at=(ge&43690)>>>1|(ge&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,Qn[ge]=((at&65280)>>>8|(at&255)<<8)>>>1}var Wt=function(a,e,t){for(var n=a.length,r=0,s=new ct(e);r<n;++r)++s[a[r]-1];var o=new ct(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var l;if(t){l=new ct(1<<e);var c=15-e;for(r=0;r<n;++r)if(a[r])for(var u=r<<4|a[r],d=e-a[r],A=o[a[r]-1]++<<d,m=A|(1<<d)-1;A<=m;++A)l[Qn[A]>>>c]=u}else for(l=new ct(n),r=0;r<n;++r)a[r]&&(l[r]=Qn[o[a[r]-1]++]>>>15-a[r]);return l},$t=new ke(288);for(var ge=0;ge<144;++ge)$t[ge]=8;for(var ge=144;ge<256;++ge)$t[ge]=9;for(var ge=256;ge<280;++ge)$t[ge]=7;for(var ge=280;ge<288;++ge)$t[ge]=8;var es=new ke(32);for(var ge=0;ge<32;++ge)es[ge]=5;var ua=Wt($t,9,1),ha=Wt(es,5,1),Gn=function(a){for(var e=a[0],t=1;t<a.length;++t)a[t]>e&&(e=a[t]);return e},Qe=function(a,e,t){var n=e/8|0;return(a[n]|a[n+1]<<8)>>(e&7)&t},wn=function(a,e){var t=e/8|0;return(a[t]|a[t+1]<<8|a[t+2]<<16)>>(e&7)},Aa=function(a){return(a/8|0)+(a&7&&1)},da=function(a,e,t){(t==null||t>a.length)&&(t=a.length);var n=new(a instanceof ct?ct:a instanceof Kn?Kn:ke)(t-e);return n.set(a.subarray(e,t)),n},ma=function(a,e,t){var n=a.length;if(!n||t&&!t.l&&n<5)return e||new ke(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new ke(n*3));var o=function(oe){var De=e.length;if(oe>De){var Fe=new ke(Math.max(De*2,oe));Fe.set(e),e=Fe}},l=t.f||0,c=t.p||0,u=t.b||0,d=t.l,A=t.d,m=t.m,B=t.n,C=n*8;do{if(!d){t.f=l=Qe(a,c,1);var v=Qe(a,c+1,3);if(c+=3,v)if(v==1)d=ua,A=ha,m=9,B=5;else if(v==2){var S=Qe(a,c,31)+257,G=Qe(a,c+10,15)+4,T=S+Qe(a,c+5,31)+1;c+=14;for(var E=new ke(T),w=new ke(19),b=0;b<G;++b)w[aa[b]]=Qe(a,c+b*3,7);c+=G*3;for(var x=Gn(w),P=(1<<x)-1,Z=Wt(w,x,1),b=0;b<T;){var z=Z[Qe(a,c,P)];c+=z&15;var g=z>>>4;if(g<16)E[b++]=g;else{var V=0,K=0;for(g==16?(K=3+Qe(a,c,3),c+=2,V=E[b-1]):g==17?(K=3+Qe(a,c,7),c+=3):g==18&&(K=11+Qe(a,c,127),c+=7);K--;)E[b++]=V}}var ne=E.subarray(0,S),q=E.subarray(S);m=Gn(ne),B=Gn(q),d=Wt(ne,m,1),A=Wt(q,B,1)}else throw"invalid block type";else{var g=Aa(c)+4,I=a[g-4]|a[g-3]<<8,R=g+I;if(R>n){if(s)throw"unexpected EOF";break}r&&o(u+I),e.set(a.subarray(g,R),u),t.b=u+=I,t.p=c=R*8;continue}if(c>C){if(s)throw"unexpected EOF";break}}r&&o(u+131072);for(var he=(1<<m)-1,ce=(1<<B)-1,ye=c;;ye=c){var V=d[wn(a,c)&he],se=V>>>4;if(c+=V&15,c>C){if(s)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(se<256)e[u++]=se;else if(se==256){ye=c,d=null;break}else{var Me=se-254;if(se>264){var b=se-257,le=Wr[b];Me=Qe(a,c,(1<<le)-1)+$r[b],c+=le}var Ce=A[wn(a,c)&ce],Te=Ce>>>4;if(!Ce)throw"invalid distance";c+=Ce&15;var q=la[Te];if(Te>3){var le=Vr[Te];q+=wn(a,c)&(1<<le)-1,c+=le}if(c>C){if(s)throw"unexpected EOF";break}r&&o(u+131072);for(var Le=u+Me;u<Le;u+=4)e[u]=e[u-q],e[u+1]=e[u+1-q],e[u+2]=e[u+2-q],e[u+3]=e[u+3-q];u=Le}}t.l=d,t.p=ye,t.b=u,d&&(l=1,t.m=m,t.d=A,t.n=B)}while(!l);return u==e.length?e:da(e,0,u)},fa=new ke(0),pa=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function An(a,e){return ma((pa(a),a.subarray(2,-4)),e)}var Ba=typeof TextDecoder<"u"&&new TextDecoder,ga=0;try{Ba.decode(fa,{stream:!0}),ga=1}catch{}const Ca=a=>a&&a.isCubeTexture;class va extends qt{constructor(e,t){var n,r;const s=Ca(e),l=((r=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?r:1024)/4,c=Math.floor(Math.log2(l)),u=Math.pow(2,c),d=3*Math.max(u,16*7),A=4*u,m=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/A}`,`#define CUBEUV_MAX_MIP ${c}.0`],B=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,C=m.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(Yn.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},g=new vs(1,16),I=new St({uniforms:v,fragmentShader:C,vertexShader:B,side:Sr});super(g,I)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ea=Object.defineProperty,Ma=(a,e,t)=>e in a?Ea(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,ya=(a,e,t)=>(Ma(a,e+"",t),t);class Ia{constructor(){ya(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var Ra=Object.defineProperty,Fa=(a,e,t)=>e in a?Ra(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W=(a,e,t)=>(Fa(a,typeof e!="symbol"?e+"":e,t),t);const dn=new Es,yr=new Ms,_a=Math.cos(70*(Math.PI/180)),Ir=(a,e)=>(a%e+e)%e;let Ta=class extends Ia{constructor(e,t){super(),W(this,"object"),W(this,"domElement"),W(this,"enabled",!0),W(this,"target",new ee),W(this,"minDistance",0),W(this,"maxDistance",1/0),W(this,"minZoom",0),W(this,"maxZoom",1/0),W(this,"minPolarAngle",0),W(this,"maxPolarAngle",Math.PI),W(this,"minAzimuthAngle",-1/0),W(this,"maxAzimuthAngle",1/0),W(this,"enableDamping",!1),W(this,"dampingFactor",.05),W(this,"enableZoom",!0),W(this,"zoomSpeed",1),W(this,"enableRotate",!0),W(this,"rotateSpeed",1),W(this,"enablePan",!0),W(this,"panSpeed",1),W(this,"screenSpacePanning",!0),W(this,"keyPanSpeed",7),W(this,"zoomToCursor",!1),W(this,"autoRotate",!1),W(this,"autoRotateSpeed",2),W(this,"reverseOrbit",!1),W(this,"reverseHorizontalOrbit",!1),W(this,"reverseVerticalOrbit",!1),W(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),W(this,"mouseButtons",{LEFT:_t.ROTATE,MIDDLE:_t.DOLLY,RIGHT:_t.PAN}),W(this,"touches",{ONE:Tt.ROTATE,TWO:Tt.DOLLY_PAN}),W(this,"target0"),W(this,"position0"),W(this,"zoom0"),W(this,"_domElementKeyEvents",null),W(this,"getPolarAngle"),W(this,"getAzimuthalAngle"),W(this,"setPolarAngle"),W(this,"setAzimuthalAngle"),W(this,"getDistance"),W(this,"getZoomScale"),W(this,"listenToKeyEvents"),W(this,"stopListenToKeyEvents"),W(this,"saveState"),W(this,"reset"),W(this,"update"),W(this,"connect"),W(this,"dispose"),W(this,"dollyIn"),W(this,"dollyOut"),W(this,"getScale"),W(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=p=>{let H=Ir(p,2*Math.PI),Q=d.phi;Q<0&&(Q+=2*Math.PI),H<0&&(H+=2*Math.PI);let ie=Math.abs(H-Q);2*Math.PI-ie<ie&&(H<Q?H+=2*Math.PI:Q+=2*Math.PI),A.phi=H-Q,n.update()},this.setAzimuthalAngle=p=>{let H=Ir(p,2*Math.PI),Q=d.theta;Q<0&&(Q+=2*Math.PI),H<0&&(H+=2*Math.PI);let ie=Math.abs(H-Q);2*Math.PI-ie<ie&&(H<Q?H+=2*Math.PI:Q+=2*Math.PI),A.theta=H-Q,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=p=>{p.addEventListener("keydown",yt),this._domElementKeyEvents=p},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",yt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=l.NONE},this.update=(()=>{const p=new ee,H=new ee(0,1,0),Q=new gt().setFromUnitVectors(e.up,H),ie=Q.clone().invert(),U=new ee,xe=new gt,Xe=2*Math.PI;return function(){const un=n.object.position;Q.setFromUnitVectors(e.up,H),ie.copy(Q).invert(),p.copy(un).sub(n.target),p.applyQuaternion(Q),d.setFromVector3(p),n.autoRotate&&c===l.NONE&&K(z()),n.enableDamping?(d.theta+=A.theta*n.dampingFactor,d.phi+=A.phi*n.dampingFactor):(d.theta+=A.theta,d.phi+=A.phi);let je=n.minAzimuthAngle,Ke=n.maxAzimuthAngle;isFinite(je)&&isFinite(Ke)&&(je<-Math.PI?je+=Xe:je>Math.PI&&(je-=Xe),Ke<-Math.PI?Ke+=Xe:Ke>Math.PI&&(Ke-=Xe),je<=Ke?d.theta=Math.max(je,Math.min(Ke,d.theta)):d.theta=d.theta>(je+Ke)/2?Math.max(je,d.theta):Math.min(Ke,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(B,n.dampingFactor):n.target.add(B),n.zoomToCursor&&x||n.object.isOrthographicCamera?d.radius=Ce(d.radius):d.radius=Ce(d.radius*m),p.setFromSpherical(d),p.applyQuaternion(ie),un.copy(n.target).add(p),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(A.theta*=1-n.dampingFactor,A.phi*=1-n.dampingFactor,B.multiplyScalar(1-n.dampingFactor)):(A.set(0,0,0),B.set(0,0,0));let At=!1;if(n.zoomToCursor&&x){let dt=null;if(n.object instanceof Bn&&n.object.isPerspectiveCamera){const mt=p.length();dt=Ce(mt*m);const Ft=mt-dt;n.object.position.addScaledVector(w,Ft),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const mt=new ee(b.x,b.y,0);mt.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix(),At=!0;const Ft=new ee(b.x,b.y,0);Ft.unproject(n.object),n.object.position.sub(Ft).add(mt),n.object.updateMatrixWorld(),dt=p.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;dt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(dt).add(n.object.position):(dn.origin.copy(n.object.position),dn.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(dn.direction))<_a?e.lookAt(n.target):(yr.setFromNormalAndCoplanarPoint(n.object.up,n.target),dn.intersectPlane(yr,n.target))))}else n.object instanceof Qt&&n.object.isOrthographicCamera&&(At=m!==1,At&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix()));return m=1,x=!1,At||U.distanceToSquared(n.object.position)>u||8*(1-xe.dot(n.object.quaternion))>u?(n.dispatchEvent(r),U.copy(n.object.position),xe.copy(n.object.quaternion),At=!1,!0):!1}})(),this.connect=p=>{n.domElement=p,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ln),n.domElement.addEventListener("pointerdown",an),n.domElement.addEventListener("pointercancel",ut),n.domElement.addEventListener("wheel",cn)},this.dispose=()=>{var p,H,Q,ie,U,xe;n.domElement&&(n.domElement.style.touchAction="auto"),(p=n.domElement)==null||p.removeEventListener("contextmenu",ln),(H=n.domElement)==null||H.removeEventListener("pointerdown",an),(Q=n.domElement)==null||Q.removeEventListener("pointercancel",ut),(ie=n.domElement)==null||ie.removeEventListener("wheel",cn),(U=n.domElement)==null||U.ownerDocument.removeEventListener("pointermove",Mt),(xe=n.domElement)==null||xe.ownerDocument.removeEventListener("pointerup",ut),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",yt)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const u=1e-6,d=new dr,A=new dr;let m=1;const B=new ee,C=new Pe,v=new Pe,g=new Pe,I=new Pe,R=new Pe,S=new Pe,G=new Pe,T=new Pe,E=new Pe,w=new ee,b=new Pe;let x=!1;const P=[],Z={};function z(){return 2*Math.PI/60/60*n.autoRotateSpeed}function V(){return Math.pow(.95,n.zoomSpeed)}function K(p){n.reverseOrbit||n.reverseHorizontalOrbit?A.theta+=p:A.theta-=p}function ne(p){n.reverseOrbit||n.reverseVerticalOrbit?A.phi+=p:A.phi-=p}const q=(()=>{const p=new ee;return function(Q,ie){p.setFromMatrixColumn(ie,0),p.multiplyScalar(-Q),B.add(p)}})(),he=(()=>{const p=new ee;return function(Q,ie){n.screenSpacePanning===!0?p.setFromMatrixColumn(ie,1):(p.setFromMatrixColumn(ie,0),p.crossVectors(n.object.up,p)),p.multiplyScalar(Q),B.add(p)}})(),ce=(()=>{const p=new ee;return function(Q,ie){const U=n.domElement;if(U&&n.object instanceof Bn&&n.object.isPerspectiveCamera){const xe=n.object.position;p.copy(xe).sub(n.target);let Xe=p.length();Xe*=Math.tan(n.object.fov/2*Math.PI/180),q(2*Q*Xe/U.clientHeight,n.object.matrix),he(2*ie*Xe/U.clientHeight,n.object.matrix)}else U&&n.object instanceof Qt&&n.object.isOrthographicCamera?(q(Q*(n.object.right-n.object.left)/n.object.zoom/U.clientWidth,n.object.matrix),he(ie*(n.object.top-n.object.bottom)/n.object.zoom/U.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ye(p){n.object instanceof Bn&&n.object.isPerspectiveCamera||n.object instanceof Qt&&n.object.isOrthographicCamera?m=p:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function se(p){ye(m/p)}function Me(p){ye(m*p)}function le(p){if(!n.zoomToCursor||!n.domElement)return;x=!0;const H=n.domElement.getBoundingClientRect(),Q=p.clientX-H.left,ie=p.clientY-H.top,U=H.width,xe=H.height;b.x=Q/U*2-1,b.y=-(ie/xe)*2+1,w.set(b.x,b.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ce(p){return Math.max(n.minDistance,Math.min(n.maxDistance,p))}function Te(p){C.set(p.clientX,p.clientY)}function Le(p){le(p),G.set(p.clientX,p.clientY)}function oe(p){I.set(p.clientX,p.clientY)}function De(p){v.set(p.clientX,p.clientY),g.subVectors(v,C).multiplyScalar(n.rotateSpeed);const H=n.domElement;H&&(K(2*Math.PI*g.x/H.clientHeight),ne(2*Math.PI*g.y/H.clientHeight)),C.copy(v),n.update()}function Fe(p){T.set(p.clientX,p.clientY),E.subVectors(T,G),E.y>0?se(V()):E.y<0&&Me(V()),G.copy(T),n.update()}function qe(p){R.set(p.clientX,p.clientY),S.subVectors(R,I).multiplyScalar(n.panSpeed),ce(S.x,S.y),I.copy(R),n.update()}function Mn(p){le(p),p.deltaY<0?Me(V()):p.deltaY>0&&se(V()),n.update()}function en(p){let H=!1;switch(p.code){case n.keys.UP:ce(0,n.keyPanSpeed),H=!0;break;case n.keys.BOTTOM:ce(0,-n.keyPanSpeed),H=!0;break;case n.keys.LEFT:ce(n.keyPanSpeed,0),H=!0;break;case n.keys.RIGHT:ce(-n.keyPanSpeed,0),H=!0;break}H&&(p.preventDefault(),n.update())}function tn(){if(P.length==1)C.set(P[0].pageX,P[0].pageY);else{const p=.5*(P[0].pageX+P[1].pageX),H=.5*(P[0].pageY+P[1].pageY);C.set(p,H)}}function Ht(){if(P.length==1)I.set(P[0].pageX,P[0].pageY);else{const p=.5*(P[0].pageX+P[1].pageX),H=.5*(P[0].pageY+P[1].pageY);I.set(p,H)}}function Pt(){const p=P[0].pageX-P[1].pageX,H=P[0].pageY-P[1].pageY,Q=Math.sqrt(p*p+H*H);G.set(0,Q)}function nn(){n.enableZoom&&Pt(),n.enablePan&&Ht()}function yn(){n.enableZoom&&Pt(),n.enableRotate&&tn()}function rn(p){if(P.length==1)v.set(p.pageX,p.pageY);else{const Q=Rt(p),ie=.5*(p.pageX+Q.x),U=.5*(p.pageY+Q.y);v.set(ie,U)}g.subVectors(v,C).multiplyScalar(n.rotateSpeed);const H=n.domElement;H&&(K(2*Math.PI*g.x/H.clientHeight),ne(2*Math.PI*g.y/H.clientHeight)),C.copy(v)}function sn(p){if(P.length==1)R.set(p.pageX,p.pageY);else{const H=Rt(p),Q=.5*(p.pageX+H.x),ie=.5*(p.pageY+H.y);R.set(Q,ie)}S.subVectors(R,I).multiplyScalar(n.panSpeed),ce(S.x,S.y),I.copy(R)}function on(p){const H=Rt(p),Q=p.pageX-H.x,ie=p.pageY-H.y,U=Math.sqrt(Q*Q+ie*ie);T.set(0,U),E.set(0,Math.pow(T.y/G.y,n.zoomSpeed)),se(E.y),G.copy(T)}function In(p){n.enableZoom&&on(p),n.enablePan&&sn(p)}function Rn(p){n.enableZoom&&on(p),n.enableRotate&&rn(p)}function an(p){var H,Q;n.enabled!==!1&&(P.length===0&&((H=n.domElement)==null||H.ownerDocument.addEventListener("pointermove",Mt),(Q=n.domElement)==null||Q.ownerDocument.addEventListener("pointerup",ut)),Tn(p),p.pointerType==="touch"?It(p):Ot(p))}function Mt(p){n.enabled!==!1&&(p.pointerType==="touch"?_n(p):Fn(p))}function ut(p){var H,Q,ie;ht(p),P.length===0&&((H=n.domElement)==null||H.releasePointerCapture(p.pointerId),(Q=n.domElement)==null||Q.ownerDocument.removeEventListener("pointermove",Mt),(ie=n.domElement)==null||ie.ownerDocument.removeEventListener("pointerup",ut)),n.dispatchEvent(o),c=l.NONE}function Ot(p){let H;switch(p.button){case 0:H=n.mouseButtons.LEFT;break;case 1:H=n.mouseButtons.MIDDLE;break;case 2:H=n.mouseButtons.RIGHT;break;default:H=-1}switch(H){case _t.DOLLY:if(n.enableZoom===!1)return;Le(p),c=l.DOLLY;break;case _t.ROTATE:if(p.ctrlKey||p.metaKey||p.shiftKey){if(n.enablePan===!1)return;oe(p),c=l.PAN}else{if(n.enableRotate===!1)return;Te(p),c=l.ROTATE}break;case _t.PAN:if(p.ctrlKey||p.metaKey||p.shiftKey){if(n.enableRotate===!1)return;Te(p),c=l.ROTATE}else{if(n.enablePan===!1)return;oe(p),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function Fn(p){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;De(p);break;case l.DOLLY:if(n.enableZoom===!1)return;Fe(p);break;case l.PAN:if(n.enablePan===!1)return;qe(p);break}}function cn(p){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(p.preventDefault(),n.dispatchEvent(s),Mn(p),n.dispatchEvent(o))}function yt(p){n.enabled===!1||n.enablePan===!1||en(p)}function It(p){switch(_e(p),P.length){case 1:switch(n.touches.ONE){case Tt.ROTATE:if(n.enableRotate===!1)return;tn(),c=l.TOUCH_ROTATE;break;case Tt.PAN:if(n.enablePan===!1)return;Ht(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case Tt.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;nn(),c=l.TOUCH_DOLLY_PAN;break;case Tt.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;yn(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function _n(p){switch(_e(p),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;rn(p),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;sn(p),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;In(p),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Rn(p),n.update();break;default:c=l.NONE}}function ln(p){n.enabled!==!1&&p.preventDefault()}function Tn(p){P.push(p)}function ht(p){delete Z[p.pointerId];for(let H=0;H<P.length;H++)if(P[H].pointerId==p.pointerId){P.splice(H,1);return}}function _e(p){let H=Z[p.pointerId];H===void 0&&(H=new Pe,Z[p.pointerId]=H),H.set(p.pageX,p.pageY)}function Rt(p){const H=p.pointerId===P[0].pointerId?P[1]:P[0];return Z[H.pointerId]}this.dollyIn=(p=V())=>{Me(p),n.update()},this.dollyOut=(p=V())=>{se(p),n.update()},this.getScale=()=>m,this.setScale=p=>{ye(p),n.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};function vn(a){if(typeof TextDecoder<"u")return new TextDecoder().decode(a);let e="";for(let t=0,n=a.length;t<n;t++)e+=String.fromCharCode(a[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Bt="srgb",rt="srgb-linear",Rr=3001,Da=3e3;class er extends Wn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Sa(t)}),this.register(function(t){return new La(t)}),this.register(function(t){return new Ka(t)}),this.register(function(t){return new Qa(t)}),this.register(function(t){return new Xa(t)}),this.register(function(t){return new Pa(t)}),this.register(function(t){return new Oa(t)}),this.register(function(t){return new Ua(t)}),this.register(function(t){return new Ja(t)}),this.register(function(t){return new wa(t)}),this.register(function(t){return new Na(t)}),this.register(function(t){return new Ha(t)}),this.register(function(t){return new ja(t)}),this.register(function(t){return new ka(t)}),this.register(function(t){return new xa(t)}),this.register(function(t){return new Za(t)}),this.register(function(t){return new Ya(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Xt.extractUrlBase(e);o=Xt.resolveURL(u,this.path)}else o=Xt.extractUrlBase(e);this.manager.itemStart(e);const l=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},c=new lt(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{s.parse(u,o,function(d){t(d),s.manager.itemEnd(e)},l)}catch(d){l(d)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(vn(new Uint8Array(e.slice(0,4)))===ts){try{o[re.KHR_BINARY_GLTF]=new Wa(e)}catch(d){r&&r(d);return}s=JSON.parse(o[re.KHR_BINARY_GLTF].content)}else s=JSON.parse(vn(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new ci(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],A=s.extensionsRequired||[];switch(d){case re.KHR_MATERIALS_UNLIT:o[d]=new Ga;break;case re.KHR_DRACO_MESH_COMPRESSION:o[d]=new Va(s,this.dracoLoader);break;case re.KHR_TEXTURE_TRANSFORM:o[d]=new za;break;case re.KHR_MESH_QUANTIZATION:o[d]=new qa;break;default:A.indexOf(d)>=0&&l[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(l),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function ba(){let a={};return{get:function(e){return a[e]},add:function(e,t){a[e]=t},remove:function(e){delete a[e]},removeAll:function(){a={}}}}const re={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class xa{constructor(e){this.parser=e,this.name=re.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const d=new Ve(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],rt);const A=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Rs(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Is(d),u.distance=A;break;case"spot":u=new ys(d),u.distance=A,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,et(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(u),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return n._getNodeRef(t.cache,l,c)})}}class Ga{constructor(){this.name=re.KHR_MATERIALS_UNLIT}getMaterialType(){return bt}extendParams(e,t,n){const r=[];e.color=new Ve(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],rt),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,Bt))}return Promise.all(r)}}class wa{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Sa{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Pe(l,l)}return Promise.all(s)}}class La{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Ha{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Pa{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ve(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],rt)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Bt)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Oa{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Ua{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ve().setRGB(l[0],l[1],l[2],rt),Promise.all(s)}}class Ja{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Na{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new Ve().setRGB(l[0],l[1],l[2],rt),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Bt)),Promise.all(s)}}class ka{constructor(e){this.parser=e,this.name=re.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class ja{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:ze}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Ka{constructor(e){this.parser=e,this.name=re.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Qa{constructor(e){this.parser=e,this.name=re.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=n.textureLoader;if(l.uri){const u=n.options.manager.getHandler(l.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Xa{constructor(e){this.parser=e,this.name=re.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=n.textureLoader;if(l.uri){const u=n.options.manager.getHandler(l.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Za{constructor(e){this.name=re.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const c=r.byteOffset||0,u=r.byteLength||0,d=r.count,A=r.byteStride,m=new Uint8Array(l,c,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,A,m,r.mode,r.filter).then(function(B){return B.buffer}):o.ready.then(function(){const B=new ArrayBuffer(d*A);return o.decodeGltfBuffer(new Uint8Array(B),d,A,m,r.mode,r.filter),B})})}else return null}}class Ya{constructor(e){this.name=re.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const u of r.primitives)if(u.mode!==Ne.TRIANGLES&&u.mode!==Ne.TRIANGLE_STRIP&&u.mode!==Ne.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],c={};for(const u in o)l.push(this.parser.getDependency("accessor",o[u]).then(d=>(c[u]=d,c[u])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(u=>{const d=u.pop(),A=d.isGroup?d.children:[d],m=u[0].count,B=[];for(const C of A){const v=new Ct,g=new ee,I=new gt,R=new ee(1,1,1),S=new Fs(C.geometry,C.material,m);for(let G=0;G<m;G++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,G),c.ROTATION&&I.fromBufferAttribute(c.ROTATION,G),c.SCALE&&R.fromBufferAttribute(c.SCALE,G),S.setMatrixAt(G,v.compose(g,I,R));for(const G in c)if(G==="_COLOR_0"){const T=c[G];S.instanceColor=new _s(T.array,T.itemSize,T.normalized)}else G!=="TRANSLATION"&&G!=="ROTATION"&&G!=="SCALE"&&C.geometry.setAttribute(G,c[G]);Lr.prototype.copy.call(S,C),this.parser.assignFinalMaterial(S),B.push(S)}return d.isGroup?(d.clear(),d.add(...B),d):B[0]}))}}const ts="glTF",kt=12,Fr={JSON:1313821514,BIN:5130562};class Wa{constructor(e){this.name=re.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,kt);if(this.header={magic:vn(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ts)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-kt,r=new DataView(e,kt);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===Fr.JSON){const c=new Uint8Array(e,kt+s,o);this.content=vn(c)}else if(l===Fr.BIN){const c=kt+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Va{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=re.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},c={},u={};for(const d in o){const A=Xn[d]||d.toLowerCase();l[A]=o[d]}for(const d in e.attributes){const A=Xn[d]||d.toLowerCase();if(o[d]!==void 0){const m=n.accessors[e.attributes[d]],B=Gt[m.componentType];u[A]=B.name,c[A]=m.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(A,m){r.decodeDracoFile(d,function(B){for(const C in B.attributes){const v=B.attributes[C],g=c[C];g!==void 0&&(v.normalized=g)}A(B)},l,u,rt,m)})})}}class za{constructor(){this.name=re.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class qa{constructor(){this.name=re.KHR_MESH_QUANTIZATION}}class ns extends Ws{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=l*2,u=l*3,d=r-t,A=(n-t)/d,m=A*A,B=m*A,C=e*u,v=C-u,g=-2*B+3*m,I=B-m,R=1-g,S=I-m+A;for(let G=0;G!==l;G++){const T=o[v+G+l],E=o[v+G+c]*d,w=o[C+G+l],b=o[C+G]*d;s[G]=R*T+S*E+g*w+I*b}return s}}const $a=new gt;class ei extends ns{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return $a.fromArray(s).normalize().toArray(s),s}}const Ne={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Gt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_r={9728:Nn,9729:we,9984:ks,9985:js,9986:Ks,9987:Hr},Tr={33071:tt,33648:Qs,10497:Jn},Sn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Xn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...oa>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},it={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ti={CUBICSPLINE:void 0,LINEAR:Ur,STEP:Xs},Ln={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ni(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new Pr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Zs})),a.DefaultMaterial}function pt(a,e,t){for(const n in t.extensions)a[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function et(a,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(a.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ri(a,e,t){let n=!1,r=!1,s=!1;for(let u=0,d=e.length;u<d;u++){const A=e[u];if(A.POSITION!==void 0&&(n=!0),A.NORMAL!==void 0&&(r=!0),A.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(a);const o=[],l=[],c=[];for(let u=0,d=e.length;u<d;u++){const A=e[u];if(n){const m=A.POSITION!==void 0?t.getDependency("accessor",A.POSITION):a.attributes.position;o.push(m)}if(r){const m=A.NORMAL!==void 0?t.getDependency("accessor",A.NORMAL):a.attributes.normal;l.push(m)}if(s){const m=A.COLOR_0!==void 0?t.getDependency("accessor",A.COLOR_0):a.attributes.color;c.push(m)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(u){const d=u[0],A=u[1],m=u[2];return n&&(a.morphAttributes.position=d),r&&(a.morphAttributes.normal=A),s&&(a.morphAttributes.color=m),a.morphTargetsRelative=!0,a})}function si(a,e){if(a.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)a.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(a.morphTargetInfluences.length===t.length){a.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)a.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function oi(a){let e;const t=a.extensions&&a.extensions[re.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Hn(t.attributes):e=a.indices+":"+Hn(a.attributes)+":"+a.mode,a.targets!==void 0)for(let n=0,r=a.targets.length;n<r;n++)e+=":"+Hn(a.targets[n]);return e}function Hn(a){let e="";const t=Object.keys(a).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+a[t[n]]+";";return e}function Zn(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ai(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ii=new Ct;class ci{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ba,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new Ts(this.options.manager):this.textureLoader=new Ds(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new lt(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return pt(s,l,r),et(l,r),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,l)=>{const c=this.associations.get(o);c!=null&&this.associations.set(l,c);for(const[u,d]of o.children.entries())s(d,l.children[u])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[re.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Xt.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Sn[r.type],l=Gt[r.componentType],c=r.normalized===!0,u=new l(r.count*o);return Promise.resolve(new Zt(u,o,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],c=Sn[r.type],u=Gt[r.componentType],d=u.BYTES_PER_ELEMENT,A=d*c,m=r.byteOffset||0,B=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,C=r.normalized===!0;let v,g;if(B&&B!==A){const I=Math.floor(m/B),R="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+I+":"+r.count;let S=t.cache.get(R);S||(v=new u(l,I*B,r.count*B/d),S=new bs(v,B/d),t.cache.add(R,S)),g=new Ys(S,c,m%B/d,C)}else l===null?v=new u(r.count*c):v=new u(l,m,r.count*c),g=new Zt(v,c,C);if(r.sparse!==void 0){const I=Sn.SCALAR,R=Gt[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,G=r.sparse.values.byteOffset||0,T=new R(o[1],S,r.sparse.count*I),E=new u(o[2],G,r.sparse.count*c);l!==null&&(g=new Zt(g.array.slice(),g.itemSize,g.normalized));for(let w=0,b=T.length;w<b;w++){const x=T[w];if(g.setX(x,E[w*c]),c>=2&&g.setY(x,E[w*c+1]),c>=3&&g.setZ(x,E[w*c+2]),c>=4&&g.setW(x,E[w*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const c=n.manager.getHandler(o.uri);c!==null&&(l=c)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],l=s.images[t],c=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=o.name||l.name||"",d.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(d.name=l.uri);const m=(s.samplers||{})[o.sampler]||{};return d.magFilter=_r[m.magFilter]||we,d.minFilter=_r[m.minFilter]||Hr,d.wrapS=Tr[m.wrapS]||Jn,d.wrapT=Tr[m.wrapT]||Jn,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(A=>A.clone());const o=r.images[e],l=self.URL||self.webkitURL;let c=o.uri||"",u=!1;if(o.bufferView!==void 0)c=n.getDependency("bufferView",o.bufferView).then(function(A){u=!0;const m=new Blob([A],{type:o.mimeType});return c=l.createObjectURL(m),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(A){return new Promise(function(m,B){let C=m;t.isImageBitmapLoader===!0&&(C=function(v){const g=new nt(v);g.needsUpdate=!0,m(g)}),t.load(Xt.resolveURL(A,s.path),C,void 0,B)})}).then(function(A){return u===!0&&l.revokeObjectURL(c),et(A,o),A.userData.mimeType=o.mimeType||ai(o.uri),A}).catch(function(A){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),A});return this.sourceCache[e]=d,d}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[re.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[re.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=s.associations.get(o);o=s.extensions[re.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===Rr?Bt:rt),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Bt?Rr:Da),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new xs,Dn.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(l,c)),n=c}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new Gs,Dn.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(l,c)),n=c}if(r||s||o){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=n.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return Pr}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const l={},c=s.extensions||{},u=[];if(c[re.KHR_MATERIALS_UNLIT]){const A=r[re.KHR_MATERIALS_UNLIT];o=A.getMaterialType(),u.push(A.extendParams(l,s,t))}else{const A=s.pbrMetallicRoughness||{};if(l.color=new Ve(1,1,1),l.opacity=1,Array.isArray(A.baseColorFactor)){const m=A.baseColorFactor;l.color.setRGB(m[0],m[1],m[2],rt),l.opacity=m[3]}A.baseColorTexture!==void 0&&u.push(t.assignTexture(l,"map",A.baseColorTexture,Bt)),l.metalness=A.metallicFactor!==void 0?A.metallicFactor:1,l.roughness=A.roughnessFactor!==void 0?A.roughnessFactor:1,A.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(l,"metalnessMap",A.metallicRoughnessTexture)),u.push(t.assignTexture(l,"roughnessMap",A.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Sr);const d=s.alphaMode||Ln.OPAQUE;if(d===Ln.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===Ln.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==bt&&(u.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Pe(1,1),s.normalTexture.scale!==void 0)){const A=s.normalTexture.scale;l.normalScale.set(A,A)}if(s.occlusionTexture!==void 0&&o!==bt&&(u.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==bt){const A=s.emissiveFactor;l.emissive=new Ve().setRGB(A[0],A[1],A[2],rt)}return s.emissiveTexture!==void 0&&o!==bt&&u.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,Bt)),Promise.all(u).then(function(){const A=new o(l);return s.name&&(A.name=s.name),et(A,s),t.associations.set(A,{materials:e}),s.extensions&&pt(r,A,s),A})}createUniqueName(e){const t=ws.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[re.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return Dr(c,l,t)})}const o=[];for(let l=0,c=e.length;l<c;l++){const u=e[l],d=oi(u),A=r[d];if(A)o.push(A.promise);else{let m;u.extensions&&u.extensions[re.KHR_DRACO_MESH_COMPRESSION]?m=s(u):m=Dr(new Or,u,t),r[d]={primitive:u,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c].material===void 0?ni(this.cache):this.getDependency("material",o[c].material);l.push(d)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(c){const u=c.slice(0,c.length-1),d=c[c.length-1],A=[];for(let B=0,C=d.length;B<C;B++){const v=d[B],g=o[B];let I;const R=u[B];if(g.mode===Ne.TRIANGLES||g.mode===Ne.TRIANGLE_STRIP||g.mode===Ne.TRIANGLE_FAN||g.mode===void 0)I=s.isSkinnedMesh===!0?new Ss(v,R):new qt(v,R),I.isSkinnedMesh===!0&&I.normalizeSkinWeights(),g.mode===Ne.TRIANGLE_STRIP?I.geometry=Mr(I.geometry,wr):g.mode===Ne.TRIANGLE_FAN&&(I.geometry=Mr(I.geometry,Un));else if(g.mode===Ne.LINES)I=new Ls(v,R);else if(g.mode===Ne.LINE_STRIP)I=new Hs(v,R);else if(g.mode===Ne.LINE_LOOP)I=new Ps(v,R);else if(g.mode===Ne.POINTS)I=new Os(v,R);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(I.geometry.morphAttributes).length>0&&si(I,s),I.name=t.createUniqueName(s.name||"mesh_"+e),et(I,s),g.extensions&&pt(r,I,g),t.assignFinalMaterial(I),A.push(I)}for(let B=0,C=A.length;B<C;B++)t.associations.set(A[B],{meshes:e,primitives:B});if(A.length===1)return s.extensions&&pt(r,A[0],s),A[0];const m=new bn;s.extensions&&pt(r,m,s),t.associations.set(m,{meshes:e});for(let B=0,C=A.length;B<C;B++)m.add(A[B]);return m})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Bn(Yt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Qt(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),et(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,l=[],c=[];for(let u=0,d=o.length;u<d;u++){const A=o[u];if(A){l.push(A);const m=new Ct;s!==null&&m.fromArray(s.array,u*16),c.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Us(l,c)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],c=[],u=[],d=[];for(let A=0,m=r.channels.length;A<m;A++){const B=r.channels[A],C=r.samplers[B.sampler],v=B.target,g=v.node,I=r.parameters!==void 0?r.parameters[C.input]:C.input,R=r.parameters!==void 0?r.parameters[C.output]:C.output;v.node!==void 0&&(o.push(this.getDependency("node",g)),l.push(this.getDependency("accessor",I)),c.push(this.getDependency("accessor",R)),u.push(C),d.push(v))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u),Promise.all(d)]).then(function(A){const m=A[0],B=A[1],C=A[2],v=A[3],g=A[4],I=[];for(let R=0,S=m.length;R<S;R++){const G=m[R],T=B[R],E=C[R],w=v[R],b=g[R];if(G===void 0)continue;G.updateMatrix&&G.updateMatrix();const x=n._createAnimationTracks(G,T,E,w,b);if(x)for(let P=0;P<x.length;P++)I.push(x[P])}return new Js(s,void 0,I)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let c=0,u=r.weights.length;c<u;c++)l.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=r.children||[];for(let u=0,d=l.length;u<d;u++)o.push(n.getDependency("node",l[u]));const c=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(u){const d=u[0],A=u[1],m=u[2];m!==null&&d.traverse(function(B){B.isSkinnedMesh&&B.bind(m,ii)});for(let B=0,C=A.length;B<C;B++)d.add(A[B]);return d})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],c=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return c&&l.push(c),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){l.push(u)}),this.nodeCache[e]=Promise.all(l).then(function(u){let d;if(s.isBone===!0?d=new Ns:u.length>1?d=new bn:u.length===1?d=u[0]:d=new Lr,d!==u[0])for(let A=0,m=u.length;A<m;A++)d.add(u[A]);if(s.name&&(d.userData.name=s.name,d.name=o),et(d,s),s.extensions&&pt(n,d,s),s.matrix!==void 0){const A=new Ct;A.fromArray(s.matrix),d.applyMatrix4(A)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new bn;n.name&&(s.name=r.createUniqueName(n.name)),et(s,n),n.extensions&&pt(t,s,n);const o=n.nodes||[],l=[];for(let c=0,u=o.length;c<u;c++)l.push(r.getDependency("node",o[c]));return Promise.all(l).then(function(c){for(let d=0,A=c.length;d<A;d++)s.add(c[d]);const u=d=>{const A=new Map;for(const[m,B]of r.associations)(m instanceof Dn||m instanceof nt)&&A.set(m,B);return d.traverse(m=>{const B=r.associations.get(m);B!=null&&A.set(m,B)}),A};return r.associations=u(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],l=e.name?e.name:e.uuid,c=[];it[s.path]===it.weights?e.traverse(function(m){m.morphTargetInfluences&&c.push(m.name?m.name:m.uuid)}):c.push(l);let u;switch(it[s.path]){case it.weights:u=fr;break;case it.rotation:u=pr;break;case it.position:case it.scale:u=mr;break;default:switch(n.itemSize){case 1:u=fr;break;case 2:case 3:default:u=mr;break}break}const d=r.interpolation!==void 0?ti[r.interpolation]:Ur,A=this._getArrayFromAccessor(n);for(let m=0,B=c.length;m<B;m++){const C=new u(c[m]+"."+it[s.path],t.array,A,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(C),o.push(C)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=Zn(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof pr?ei:ns;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function li(a,e,t){const n=e.attributes,r=new Vn;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],c=l.min,u=l.max;if(c!==void 0&&u!==void 0){if(r.set(new ee(c[0],c[1],c[2]),new ee(u[0],u[1],u[2])),l.normalized){const d=Zn(Gt[l.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new ee,c=new ee;for(let u=0,d=s.length;u<d;u++){const A=s[u];if(A.POSITION!==void 0){const m=t.json.accessors[A.POSITION],B=m.min,C=m.max;if(B!==void 0&&C!==void 0){if(c.setX(Math.max(Math.abs(B[0]),Math.abs(C[0]))),c.setY(Math.max(Math.abs(B[1]),Math.abs(C[1]))),c.setZ(Math.max(Math.abs(B[2]),Math.abs(C[2]))),m.normalized){const v=Zn(Gt[m.componentType]);c.multiplyScalar(v)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}a.boundingBox=r;const o=new Jr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,a.boundingSphere=o}function Dr(a,e,t){const n=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(c){a.setAttribute(l,c)})}for(const o in n){const l=Xn[o]||o.toLowerCase();l in a.attributes||r.push(s(n[o],l))}if(e.indices!==void 0&&!a.index){const o=t.getDependency("accessor",e.indices).then(function(l){a.setIndex(l)});r.push(o)}return et(a,e),li(a,e,t),Promise.all(r).then(function(){return e.targets!==void 0?ri(a,e.targets,t):a})}const ui={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},hi={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class Ai extends Nr{constructor(e){super(e),this.type=Se}parse(e){const o=function(b,x){switch(b){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(x||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(x||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(x||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(x||""))}},d=`
`,A=function(b,x,P){x=x||1024;let z=b.pos,V=-1,K=0,ne="",q=String.fromCharCode.apply(null,new Uint16Array(b.subarray(z,z+128)));for(;0>(V=q.indexOf(d))&&K<x&&z<b.byteLength;)ne+=q,K+=q.length,z+=128,q+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(z,z+128)));return-1<V?(b.pos+=K+V+1,ne+q.slice(0,V)):!1},m=function(b){const x=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,K={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ne,q;for((b.pos>=b.byteLength||!(ne=A(b)))&&o(1,"no header found"),(q=ne.match(x))||o(3,"bad initial token"),K.valid|=1,K.programtype=q[1],K.string+=ne+`
`;ne=A(b),ne!==!1;){if(K.string+=ne+`
`,ne.charAt(0)==="#"){K.comments+=ne+`
`;continue}if((q=ne.match(P))&&(K.gamma=parseFloat(q[1])),(q=ne.match(Z))&&(K.exposure=parseFloat(q[1])),(q=ne.match(z))&&(K.valid|=2,K.format=q[1]),(q=ne.match(V))&&(K.valid|=4,K.height=parseInt(q[1],10),K.width=parseInt(q[2],10)),K.valid&2&&K.valid&4)break}return K.valid&2||o(3,"missing format specifier"),K.valid&4||o(3,"missing image size specifier"),K},B=function(b,x,P){const Z=x;if(Z<8||Z>32767||b[0]!==2||b[1]!==2||b[2]&128)return new Uint8Array(b);Z!==(b[2]<<8|b[3])&&o(3,"wrong scanline width");const z=new Uint8Array(4*x*P);z.length||o(4,"unable to allocate buffer space");let V=0,K=0;const ne=4*Z,q=new Uint8Array(4),he=new Uint8Array(ne);let ce=P;for(;ce>0&&K<b.byteLength;){K+4>b.byteLength&&o(1),q[0]=b[K++],q[1]=b[K++],q[2]=b[K++],q[3]=b[K++],(q[0]!=2||q[1]!=2||(q[2]<<8|q[3])!=Z)&&o(3,"bad rgbe scanline format");let ye=0,se;for(;ye<ne&&K<b.byteLength;){se=b[K++];const le=se>128;if(le&&(se-=128),(se===0||ye+se>ne)&&o(3,"bad scanline data"),le){const Ce=b[K++];for(let Te=0;Te<se;Te++)he[ye++]=Ce}else he.set(b.subarray(K,K+se),ye),ye+=se,K+=se}const Me=Z;for(let le=0;le<Me;le++){let Ce=0;z[V]=he[le+Ce],Ce+=Z,z[V+1]=he[le+Ce],Ce+=Z,z[V+2]=he[le+Ce],Ce+=Z,z[V+3]=he[le+Ce],V+=4}ce--}return z},C=function(b,x,P,Z){const z=b[x+3],V=Math.pow(2,z-128)/255;P[Z+0]=b[x+0]*V,P[Z+1]=b[x+1]*V,P[Z+2]=b[x+2]*V,P[Z+3]=1},v=function(b,x,P,Z){const z=b[x+3],V=Math.pow(2,z-128)/255;P[Z+0]=xt.toHalfFloat(Math.min(b[x+0]*V,65504)),P[Z+1]=xt.toHalfFloat(Math.min(b[x+1]*V,65504)),P[Z+2]=xt.toHalfFloat(Math.min(b[x+2]*V,65504)),P[Z+3]=xt.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const I=m(g),R=I.width,S=I.height,G=B(g.subarray(g.pos),R,S);let T,E,w;switch(this.type){case We:w=G.length/4;const b=new Float32Array(w*4);for(let P=0;P<w;P++)C(G,P*4,b,P*4);T=b,E=We;break;case Se:w=G.length/4;const x=new Uint16Array(w*4);for(let P=0;P<w;P++)v(G,P*4,x,P*4);T=x,E=Se;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:R,height:S,data:T,header:I.string,gamma:I.gamma,exposure:I.exposure,type:E}}setDataType(e){return this.type=e,this}load(e,t,n,r){function s(o,l){switch(o.type){case We:case Se:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=we,o.magFilter=we,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,l)}return super.load(e,s,n,r)}}const jt="colorSpace"in new nt;class di extends Nr{constructor(e){super(e),this.type=Se}parse(e){const x=Math.pow(2.7182818,2.2);function P(i,h){for(var f=0,M=0;M<65536;++M)(M==0||i[M>>3]&1<<(M&7))&&(h[f++]=M);for(var F=f-1;f<65536;)h[f++]=0;return F}function Z(i){for(var h=0;h<16384;h++)i[h]={},i[h].len=0,i[h].lit=0,i[h].p=null}const z={l:0,c:0,lc:0};function V(i,h,f,M,F){for(;f<i;)h=h<<8|Rt(M,F),f+=8;f-=i,z.l=h>>f&(1<<i)-1,z.c=h,z.lc=f}const K=new Array(59);function ne(i){for(var h=0;h<=58;++h)K[h]=0;for(var h=0;h<65537;++h)K[i[h]]+=1;for(var f=0,h=58;h>0;--h){var M=f+K[h]>>1;K[h]=f,f=M}for(var h=0;h<65537;++h){var F=i[h];F>0&&(i[h]=F|K[F]++<<6)}}function q(i,h,f,M,F,_,O){for(var L=f,k=0,N=0;F<=_;F++){if(L.value-f.value>M)return!1;V(6,k,N,i,L);var j=z.l;if(k=z.c,N=z.lc,O[F]=j,j==63){if(L.value-f.value>M)throw"Something wrong with hufUnpackEncTable";V(8,k,N,i,L);var J=z.l+6;if(k=z.c,N=z.lc,F+J>_+1)throw"Something wrong with hufUnpackEncTable";for(;J--;)O[F++]=0;F--}else if(j>=59){var J=j-59+2;if(F+J>_+1)throw"Something wrong with hufUnpackEncTable";for(;J--;)O[F++]=0;F--}}ne(O)}function he(i){return i&63}function ce(i){return i>>6}function ye(i,h,f,M){for(;h<=f;h++){var F=ce(i[h]),_=he(i[h]);if(F>>_)throw"Invalid table entry";if(_>14){var O=M[F>>_-14];if(O.len)throw"Invalid table entry";if(O.lit++,O.p){var L=O.p;O.p=new Array(O.lit);for(var k=0;k<O.lit-1;++k)O.p[k]=L[k]}else O.p=new Array(1);O.p[O.lit-1]=h}else if(_)for(var N=0,k=1<<14-_;k>0;k--){var O=M[(F<<14-_)+N];if(O.len||O.p)throw"Invalid table entry";O.len=_,O.lit=h,N++}}return!0}const se={c:0,lc:0};function Me(i,h,f,M){i=i<<8|Rt(f,M),h+=8,se.c=i,se.lc=h}const le={c:0,lc:0};function Ce(i,h,f,M,F,_,O,L,k,N){if(i==h){M<8&&(Me(f,M,F,O),f=se.c,M=se.lc),M-=8;var j=f>>M,j=new Uint8Array([j])[0];if(k.value+j>N)return!1;for(var J=L[k.value-1];j-- >0;)L[k.value++]=J}else if(k.value<N)L[k.value++]=i;else return!1;le.c=f,le.lc=M}function Te(i){return i&65535}function Le(i){var h=Te(i);return h>32767?h-65536:h}const oe={a:0,b:0};function De(i,h){var f=Le(i),M=Le(h),F=M,_=f+(F&1)+(F>>1),O=_,L=_-F;oe.a=O,oe.b=L}function Fe(i,h){var f=Te(i),M=Te(h),F=f-(M>>1)&65535,_=M+F-32768&65535;oe.a=_,oe.b=F}function qe(i,h,f,M,F,_,O){for(var L=O<16384,k=f>F?F:f,N=1,j;N<=k;)N<<=1;for(N>>=1,j=N,N>>=1;N>=1;){for(var J=0,Ee=J+_*(F-j),X=_*N,Y=_*j,$=M*N,te=M*j,Ae,me,Ie,Ge;J<=Ee;J+=Y){for(var fe=J,Ze=J+M*(f-j);fe<=Ze;fe+=te){var Be=fe+$,Re=fe+X,$e=Re+$;L?(De(i[fe+h],i[Re+h]),Ae=oe.a,Ie=oe.b,De(i[Be+h],i[$e+h]),me=oe.a,Ge=oe.b,De(Ae,me),i[fe+h]=oe.a,i[Be+h]=oe.b,De(Ie,Ge),i[Re+h]=oe.a,i[$e+h]=oe.b):(Fe(i[fe+h],i[Re+h]),Ae=oe.a,Ie=oe.b,Fe(i[Be+h],i[$e+h]),me=oe.a,Ge=oe.b,Fe(Ae,me),i[fe+h]=oe.a,i[Be+h]=oe.b,Fe(Ie,Ge),i[Re+h]=oe.a,i[$e+h]=oe.b)}if(f&N){var Re=fe+X;L?De(i[fe+h],i[Re+h]):Fe(i[fe+h],i[Re+h]),Ae=oe.a,i[Re+h]=oe.b,i[fe+h]=Ae}}if(F&N)for(var fe=J,Ze=J+M*(f-j);fe<=Ze;fe+=te){var Be=fe+$;L?De(i[fe+h],i[Be+h]):Fe(i[fe+h],i[Be+h]),Ae=oe.a,i[Be+h]=oe.b,i[fe+h]=Ae}j=N,N>>=1}return J}function Mn(i,h,f,M,F,_,O,L,k,N){for(var j=0,J=0,Ee=L,X=Math.trunc(F.value+(_+7)/8);F.value<X;)for(Me(j,J,f,F),j=se.c,J=se.lc;J>=14;){var Y=j>>J-14&16383,$=h[Y];if($.len)J-=$.len,Ce($.lit,O,j,J,f,M,F,k,N,Ee),j=le.c,J=le.lc;else{if(!$.p)throw"hufDecode issues";var te;for(te=0;te<$.lit;te++){for(var Ae=he(i[$.p[te]]);J<Ae&&F.value<X;)Me(j,J,f,F),j=se.c,J=se.lc;if(J>=Ae&&ce(i[$.p[te]])==(j>>J-Ae&(1<<Ae)-1)){J-=Ae,Ce($.p[te],O,j,J,f,M,F,k,N,Ee),j=le.c,J=le.lc;break}}if(te==$.lit)throw"hufDecode issues"}}var me=8-_&7;for(j>>=me,J-=me;J>0;){var $=h[j<<14-J&16383];if($.len)J-=$.len,Ce($.lit,O,j,J,f,M,F,k,N,Ee),j=le.c,J=le.lc;else throw"hufDecode issues"}return!0}function en(i,h,f,M,F,_){var O={value:0},L=f.value,k=_e(h,f),N=_e(h,f);f.value+=4;var j=_e(h,f);if(f.value+=4,k<0||k>=65537||N<0||N>=65537)throw"Something wrong with HUF_ENCSIZE";var J=new Array(65537),Ee=new Array(16384);Z(Ee);var X=M-(f.value-L);if(q(i,h,f,X,k,N,J),j>8*(M-(f.value-L)))throw"Something wrong with hufUncompress";ye(J,k,N,Ee),Mn(J,Ee,i,h,f,j,N,_,F,O)}function tn(i,h,f){for(var M=0;M<f;++M)h[M]=i[h[M]]}function Ht(i){for(var h=1;h<i.length;h++){var f=i[h-1]+i[h]-128;i[h]=f}}function Pt(i,h){for(var f=0,M=Math.floor((i.length+1)/2),F=0,_=i.length-1;!(F>_||(h[F++]=i[f++],F>_));)h[F++]=i[M++]}function nn(i){for(var h=i.byteLength,f=new Array,M=0,F=new DataView(i);h>0;){var _=F.getInt8(M++);if(_<0){var O=-_;h-=O+1;for(var L=0;L<O;L++)f.push(F.getUint8(M++))}else{var O=_;h-=2;for(var k=F.getUint8(M++),L=0;L<O+1;L++)f.push(k)}}return f}function yn(i,h,f,M,F,_){var Be=new DataView(_.buffer),O=f[i.idx[0]].width,L=f[i.idx[0]].height,k=3,N=Math.floor(O/8),j=Math.ceil(O/8),J=Math.ceil(L/8),Ee=O-(j-1)*8,X=L-(J-1)*8,Y={value:0},$=new Array(k),te=new Array(k),Ae=new Array(k),me=new Array(k),Ie=new Array(k);for(let de=0;de<k;++de)Ie[de]=h[i.idx[de]],$[de]=de<1?0:$[de-1]+j*J,te[de]=new Float32Array(64),Ae[de]=new Uint16Array(64),me[de]=new Uint16Array(j*64);for(let de=0;de<J;++de){var Ge=8;de==J-1&&(Ge=X);var fe=8;for(let ve=0;ve<j;++ve){ve==j-1&&(fe=Ee);for(let ue=0;ue<k;++ue)Ae[ue].fill(0),Ae[ue][0]=F[$[ue]++],rn(Y,M,Ae[ue]),sn(Ae[ue],te[ue]),on(te[ue]);In(te);for(let ue=0;ue<k;++ue)Rn(te[ue],me[ue],ve*64)}let be=0;for(let ve=0;ve<k;++ve){const ue=f[i.idx[ve]].type;for(let Ue=8*de;Ue<8*de+Ge;++Ue){be=Ie[ve][Ue];for(let ft=0;ft<N;++ft){const He=ft*64+(Ue&7)*8;Be.setUint16(be+0*2*ue,me[ve][He+0],!0),Be.setUint16(be+1*2*ue,me[ve][He+1],!0),Be.setUint16(be+2*2*ue,me[ve][He+2],!0),Be.setUint16(be+3*2*ue,me[ve][He+3],!0),Be.setUint16(be+4*2*ue,me[ve][He+4],!0),Be.setUint16(be+5*2*ue,me[ve][He+5],!0),Be.setUint16(be+6*2*ue,me[ve][He+6],!0),Be.setUint16(be+7*2*ue,me[ve][He+7],!0),be+=8*2*ue}}if(N!=j)for(let Ue=8*de;Ue<8*de+Ge;++Ue){const ft=Ie[ve][Ue]+8*N*2*ue,He=N*64+(Ue&7)*8;for(let ot=0;ot<fe;++ot)Be.setUint16(ft+ot*2*ue,me[ve][He+ot],!0)}}}for(var Ze=new Uint16Array(O),Be=new DataView(_.buffer),Re=0;Re<k;++Re){f[i.idx[Re]].decoded=!0;var $e=f[i.idx[Re]].type;if(f[Re].type==2)for(var Nt=0;Nt<L;++Nt){const de=Ie[Re][Nt];for(var Oe=0;Oe<O;++Oe)Ze[Oe]=Be.getUint16(de+Oe*2*$e,!0);for(var Oe=0;Oe<O;++Oe)Be.setFloat32(de+Oe*2*$e,U(Ze[Oe]),!0)}}}function rn(i,h,f){for(var M,F=1;F<64;)M=h[i.value],M==65280?F=64:M>>8==255?F+=M&255:(f[F]=M,F++),i.value++}function sn(i,h){h[0]=U(i[0]),h[1]=U(i[1]),h[2]=U(i[5]),h[3]=U(i[6]),h[4]=U(i[14]),h[5]=U(i[15]),h[6]=U(i[27]),h[7]=U(i[28]),h[8]=U(i[2]),h[9]=U(i[4]),h[10]=U(i[7]),h[11]=U(i[13]),h[12]=U(i[16]),h[13]=U(i[26]),h[14]=U(i[29]),h[15]=U(i[42]),h[16]=U(i[3]),h[17]=U(i[8]),h[18]=U(i[12]),h[19]=U(i[17]),h[20]=U(i[25]),h[21]=U(i[30]),h[22]=U(i[41]),h[23]=U(i[43]),h[24]=U(i[9]),h[25]=U(i[11]),h[26]=U(i[18]),h[27]=U(i[24]),h[28]=U(i[31]),h[29]=U(i[40]),h[30]=U(i[44]),h[31]=U(i[53]),h[32]=U(i[10]),h[33]=U(i[19]),h[34]=U(i[23]),h[35]=U(i[32]),h[36]=U(i[39]),h[37]=U(i[45]),h[38]=U(i[52]),h[39]=U(i[54]),h[40]=U(i[20]),h[41]=U(i[22]),h[42]=U(i[33]),h[43]=U(i[38]),h[44]=U(i[46]),h[45]=U(i[51]),h[46]=U(i[55]),h[47]=U(i[60]),h[48]=U(i[21]),h[49]=U(i[34]),h[50]=U(i[37]),h[51]=U(i[47]),h[52]=U(i[50]),h[53]=U(i[56]),h[54]=U(i[59]),h[55]=U(i[61]),h[56]=U(i[35]),h[57]=U(i[36]),h[58]=U(i[48]),h[59]=U(i[49]),h[60]=U(i[57]),h[61]=U(i[58]),h[62]=U(i[62]),h[63]=U(i[63])}function on(i){const h=.5*Math.cos(.7853975),f=.5*Math.cos(3.14159/16),M=.5*Math.cos(3.14159/8),F=.5*Math.cos(3*3.14159/16),_=.5*Math.cos(5*3.14159/16),O=.5*Math.cos(3*3.14159/8),L=.5*Math.cos(7*3.14159/16);for(var k=new Array(4),N=new Array(4),j=new Array(4),J=new Array(4),Ee=0;Ee<8;++Ee){var X=Ee*8;k[0]=M*i[X+2],k[1]=O*i[X+2],k[2]=M*i[X+6],k[3]=O*i[X+6],N[0]=f*i[X+1]+F*i[X+3]+_*i[X+5]+L*i[X+7],N[1]=F*i[X+1]-L*i[X+3]-f*i[X+5]-_*i[X+7],N[2]=_*i[X+1]-f*i[X+3]+L*i[X+5]+F*i[X+7],N[3]=L*i[X+1]-_*i[X+3]+F*i[X+5]-f*i[X+7],j[0]=h*(i[X+0]+i[X+4]),j[3]=h*(i[X+0]-i[X+4]),j[1]=k[0]+k[3],j[2]=k[1]-k[2],J[0]=j[0]+j[1],J[1]=j[3]+j[2],J[2]=j[3]-j[2],J[3]=j[0]-j[1],i[X+0]=J[0]+N[0],i[X+1]=J[1]+N[1],i[X+2]=J[2]+N[2],i[X+3]=J[3]+N[3],i[X+4]=J[3]-N[3],i[X+5]=J[2]-N[2],i[X+6]=J[1]-N[1],i[X+7]=J[0]-N[0]}for(var Y=0;Y<8;++Y)k[0]=M*i[16+Y],k[1]=O*i[16+Y],k[2]=M*i[48+Y],k[3]=O*i[48+Y],N[0]=f*i[8+Y]+F*i[24+Y]+_*i[40+Y]+L*i[56+Y],N[1]=F*i[8+Y]-L*i[24+Y]-f*i[40+Y]-_*i[56+Y],N[2]=_*i[8+Y]-f*i[24+Y]+L*i[40+Y]+F*i[56+Y],N[3]=L*i[8+Y]-_*i[24+Y]+F*i[40+Y]-f*i[56+Y],j[0]=h*(i[Y]+i[32+Y]),j[3]=h*(i[Y]-i[32+Y]),j[1]=k[0]+k[3],j[2]=k[1]-k[2],J[0]=j[0]+j[1],J[1]=j[3]+j[2],J[2]=j[3]-j[2],J[3]=j[0]-j[1],i[0+Y]=J[0]+N[0],i[8+Y]=J[1]+N[1],i[16+Y]=J[2]+N[2],i[24+Y]=J[3]+N[3],i[32+Y]=J[3]-N[3],i[40+Y]=J[2]-N[2],i[48+Y]=J[1]-N[1],i[56+Y]=J[0]-N[0]}function In(i){for(var h=0;h<64;++h){var f=i[0][h],M=i[1][h],F=i[2][h];i[0][h]=f+1.5747*F,i[1][h]=f-.1873*M-.4682*F,i[2][h]=f+1.8556*M}}function Rn(i,h,f){for(var M=0;M<64;++M)h[f+M]=xt.toHalfFloat(an(i[M]))}function an(i){return i<=1?Math.sign(i)*Math.pow(Math.abs(i),2.2):Math.sign(i)*Math.pow(x,Math.abs(i)-1)}function Mt(i){return new DataView(i.array.buffer,i.offset.value,i.size)}function ut(i){var h=i.viewer.buffer.slice(i.offset.value,i.offset.value+i.size),f=new Uint8Array(nn(h)),M=new Uint8Array(f.length);return Ht(f),Pt(f,M),new DataView(M.buffer)}function Ot(i){var h=i.array.slice(i.offset.value,i.offset.value+i.size),f=An(h),M=new Uint8Array(f.length);return Ht(f),Pt(f,M),new DataView(M.buffer)}function Fn(i){for(var h=i.viewer,f={value:i.offset.value},M=new Uint16Array(i.width*i.scanlineBlockSize*(i.channels*i.type)),F=new Uint8Array(8192),_=0,O=new Array(i.channels),L=0;L<i.channels;L++)O[L]={},O[L].start=_,O[L].end=O[L].start,O[L].nx=i.width,O[L].ny=i.lines,O[L].size=i.type,_+=O[L].nx*O[L].ny*O[L].size;var k=xe(h,f),N=xe(h,f);if(N>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(k<=N)for(var L=0;L<N-k+1;L++)F[L+k]=p(h,f);var j=new Uint16Array(65536),J=P(F,j),Ee=_e(h,f);en(i.array,h,f,Ee,M,_);for(var L=0;L<i.channels;++L)for(var X=O[L],Y=0;Y<O[L].size;++Y)qe(M,X.start+Y,X.nx,X.size,X.ny,X.nx*X.size,J);tn(j,M,_);for(var $=0,te=new Uint8Array(M.buffer.byteLength),Ae=0;Ae<i.lines;Ae++)for(var me=0;me<i.channels;me++){var X=O[me],Ie=X.nx*X.size,Ge=new Uint8Array(M.buffer,X.end*2,Ie*2);te.set(Ge,$),$+=Ie*2,X.end+=Ie}return new DataView(te.buffer)}function cn(i){var h=i.array.slice(i.offset.value,i.offset.value+i.size),f=An(h);const M=i.lines*i.channels*i.width,F=i.type==1?new Uint16Array(M):new Uint32Array(M);let _=0,O=0;const L=new Array(4);for(let k=0;k<i.lines;k++)for(let N=0;N<i.channels;N++){let j=0;switch(i.type){case 1:L[0]=_,L[1]=L[0]+i.width,_=L[1]+i.width;for(let J=0;J<i.width;++J){const Ee=f[L[0]++]<<8|f[L[1]++];j+=Ee,F[O]=j,O++}break;case 2:L[0]=_,L[1]=L[0]+i.width,L[2]=L[1]+i.width,_=L[2]+i.width;for(let J=0;J<i.width;++J){const Ee=f[L[0]++]<<24|f[L[1]++]<<16|f[L[2]++]<<8;j+=Ee,F[O]=j,O++}break}}return new DataView(F.buffer)}function yt(i){var h=i.viewer,f={value:i.offset.value},M=new Uint8Array(i.width*i.lines*(i.channels*i.type*2)),F={version:H(h,f),unknownUncompressedSize:H(h,f),unknownCompressedSize:H(h,f),acCompressedSize:H(h,f),dcCompressedSize:H(h,f),rleCompressedSize:H(h,f),rleUncompressedSize:H(h,f),rleRawSize:H(h,f),totalAcUncompressedCount:H(h,f),totalDcUncompressedCount:H(h,f),acCompression:H(h,f)};if(F.version<2)throw"EXRLoader.parse: "+Jt.compression+" version "+F.version+" is unsupported";for(var _=new Array,O=xe(h,f)-2;O>0;){var L=It(h.buffer,f),k=p(h,f),N=k>>2&3,j=(k>>4)-1,J=new Int8Array([j])[0],Ee=p(h,f);_.push({name:L,index:J,type:Ee,compression:N}),O-=L.length+3}for(var X=Jt.channels,Y=new Array(i.channels),$=0;$<i.channels;++$){var te=Y[$]={},Ae=X[$];te.name=Ae.name,te.compression=0,te.decoded=!1,te.type=Ae.pixelType,te.pLinear=Ae.pLinear,te.width=i.width,te.height=i.lines}for(var me={idx:new Array(3)},Ie=0;Ie<i.channels;++Ie)for(var te=Y[Ie],$=0;$<_.length;++$){var Ge=_[$];te.name==Ge.name&&(te.compression=Ge.compression,Ge.index>=0&&(me.idx[Ge.index]=Ie),te.offset=Ie)}if(F.acCompressedSize>0)switch(F.acCompression){case 0:var Be=new Uint16Array(F.totalAcUncompressedCount);en(i.array,h,f,F.acCompressedSize,Be,F.totalAcUncompressedCount);break;case 1:var fe=i.array.slice(f.value,f.value+F.totalAcUncompressedCount),Ze=An(fe),Be=new Uint16Array(Ze.buffer);f.value+=F.totalAcUncompressedCount;break}if(F.dcCompressedSize>0){var Re={array:i.array,offset:f,size:F.dcCompressedSize},$e=new Uint16Array(Ot(Re).buffer);f.value+=F.dcCompressedSize}if(F.rleRawSize>0){var fe=i.array.slice(f.value,f.value+F.rleCompressedSize),Ze=An(fe),Nt=nn(Ze.buffer);f.value+=F.rleCompressedSize}for(var Oe=0,de=new Array(Y.length),$=0;$<de.length;++$)de[$]=new Array;for(var be=0;be<i.lines;++be)for(var ve=0;ve<Y.length;++ve)de[ve].push(Oe),Oe+=Y[ve].width*i.type*2;yn(me,de,Y,Be,$e,M);for(var $=0;$<Y.length;++$){var te=Y[$];if(!te.decoded)switch(te.compression){case 2:for(var ue=0,Ue=0,be=0;be<i.lines;++be){for(var ft=de[$][ue],He=0;He<te.width;++He){for(var ot=0;ot<2*te.type;++ot)M[ft++]=Nt[Ue+ot*te.width*te.height];Ue++}ue++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(M.buffer)}function It(i,h){for(var f=new Uint8Array(i),M=0;f[h.value+M]!=0;)M+=1;var F=new TextDecoder().decode(f.slice(h.value,h.value+M));return h.value=h.value+M+1,F}function _n(i,h,f){var M=new TextDecoder().decode(new Uint8Array(i).slice(h.value,h.value+f));return h.value=h.value+f,M}function ln(i,h){var f=ht(i,h),M=_e(i,h);return[f,M]}function Tn(i,h){var f=_e(i,h),M=_e(i,h);return[f,M]}function ht(i,h){var f=i.getInt32(h.value,!0);return h.value=h.value+4,f}function _e(i,h){var f=i.getUint32(h.value,!0);return h.value=h.value+4,f}function Rt(i,h){var f=i[h.value];return h.value=h.value+1,f}function p(i,h){var f=i.getUint8(h.value);return h.value=h.value+1,f}const H=function(i,h){let f;return"getBigInt64"in DataView.prototype?f=Number(i.getBigInt64(h.value,!0)):f=i.getUint32(h.value+4,!0)+Number(i.getUint32(h.value,!0)<<32),h.value+=8,f};function Q(i,h){var f=i.getFloat32(h.value,!0);return h.value+=4,f}function ie(i,h){return xt.toHalfFloat(Q(i,h))}function U(i){var h=(i&31744)>>10,f=i&1023;return(i>>15?-1:1)*(h?h===31?f?NaN:1/0:Math.pow(2,h-15)*(1+f/1024):6103515625e-14*(f/1024))}function xe(i,h){var f=i.getUint16(h.value,!0);return h.value+=2,f}function Xe(i,h){return U(xe(i,h))}function hr(i,h,f,M){for(var F=f.value,_=[];f.value<F+M-1;){var O=It(h,f),L=ht(i,f),k=p(i,f);f.value+=3;var N=ht(i,f),j=ht(i,f);_.push({name:O,pixelType:L,pLinear:k,xSampling:N,ySampling:j})}return f.value+=1,_}function un(i,h){var f=Q(i,h),M=Q(i,h),F=Q(i,h),_=Q(i,h),O=Q(i,h),L=Q(i,h),k=Q(i,h),N=Q(i,h);return{redX:f,redY:M,greenX:F,greenY:_,blueX:O,blueY:L,whiteX:k,whiteY:N}}function je(i,h){var f=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],M=p(i,h);return f[M]}function Ke(i,h){var f=_e(i,h),M=_e(i,h),F=_e(i,h),_=_e(i,h);return{xMin:f,yMin:M,xMax:F,yMax:_}}function At(i,h){var f=["INCREASING_Y"],M=p(i,h);return f[M]}function dt(i,h){var f=Q(i,h),M=Q(i,h);return[f,M]}function mt(i,h){var f=Q(i,h),M=Q(i,h),F=Q(i,h);return[f,M,F]}function Ft(i,h,f,M,F){if(M==="string"||M==="stringvector"||M==="iccProfile")return _n(h,f,F);if(M==="chlist")return hr(i,h,f,F);if(M==="chromaticities")return un(i,f);if(M==="compression")return je(i,f);if(M==="box2i")return Ke(i,f);if(M==="lineOrder")return At(i,f);if(M==="float")return Q(i,f);if(M==="v2f")return dt(i,f);if(M==="v3f")return mt(i,f);if(M==="int")return ht(i,f);if(M==="rational")return ln(i,f);if(M==="timecode")return Tn(i,f);if(M==="preview")return f.value+=F,"skipped";f.value+=F}function fs(i,h,f){const M={};if(i.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";M.version=i.getUint8(4);const F=i.getUint8(5);M.spec={singleTile:!!(F&2),longName:!!(F&4),deepFormat:!!(F&8),multiPart:!!(F&16)},f.value=8;for(var _=!0;_;){var O=It(h,f);if(O==0)_=!1;else{var L=It(h,f),k=_e(i,f),N=Ft(i,h,f,L,k);N===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${L}'.`):M[O]=N}}if(F&-5)throw console.error("EXRHeader:",M),"THREE.EXRLoader: provided file is currently unsupported.";return M}function ps(i,h,f,M,F){const _={size:0,viewer:h,array:f,offset:M,width:i.dataWindow.xMax-i.dataWindow.xMin+1,height:i.dataWindow.yMax-i.dataWindow.yMin+1,channels:i.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:i.channels[0].pixelType,uncompress:null,getter:null,format:null,[jt?"colorSpace":"encoding"]:null};switch(i.compression){case"NO_COMPRESSION":_.lines=1,_.uncompress=Mt;break;case"RLE_COMPRESSION":_.lines=1,_.uncompress=ut;break;case"ZIPS_COMPRESSION":_.lines=1,_.uncompress=Ot;break;case"ZIP_COMPRESSION":_.lines=16,_.uncompress=Ot;break;case"PIZ_COMPRESSION":_.lines=32,_.uncompress=Fn;break;case"PXR24_COMPRESSION":_.lines=16,_.uncompress=cn;break;case"DWAA_COMPRESSION":_.lines=32,_.uncompress=yt;break;case"DWAB_COMPRESSION":_.lines=256,_.uncompress=yt;break;default:throw"EXRLoader.parse: "+i.compression+" is unsupported"}if(_.scanlineBlockSize=_.lines,_.type==1)switch(F){case We:_.getter=Xe,_.inputSize=2;break;case Se:_.getter=xe,_.inputSize=2;break}else if(_.type==2)switch(F){case We:_.getter=Q,_.inputSize=4;break;case Se:_.getter=ie,_.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+_.type+" for "+i.compression+".";_.blockCount=(i.dataWindow.yMax+1)/_.scanlineBlockSize;for(var O=0;O<_.blockCount;O++)H(h,M);_.outputChannels=_.channels==3?4:_.channels;const L=_.width*_.height*_.outputChannels;switch(F){case We:_.byteArray=new Float32Array(L),_.channels<_.outputChannels&&_.byteArray.fill(1,0,L);break;case Se:_.byteArray=new Uint16Array(L),_.channels<_.outputChannels&&_.byteArray.fill(15360,0,L);break;default:console.error("THREE.EXRLoader: unsupported type: ",F);break}return _.bytesPerLine=_.width*_.inputSize*_.channels,_.outputChannels==4?_.format=Vt:_.format=Vs,jt?_.colorSpace="srgb-linear":_.encoding=3e3,_}const hn=new DataView(e),Bs=new Uint8Array(e),Ut={value:0},Jt=fs(hn,e,Ut),ae=ps(Jt,hn,Bs,Ut,this.type),Ar={value:0},gs={R:0,G:1,B:2,A:3,Y:0};for(let i=0;i<ae.height/ae.scanlineBlockSize;i++){const h=_e(hn,Ut);ae.size=_e(hn,Ut),ae.lines=h+ae.scanlineBlockSize>ae.height?ae.height-h:ae.scanlineBlockSize;const M=ae.size<ae.lines*ae.bytesPerLine?ae.uncompress(ae):Mt(ae);Ut.value+=ae.size;for(let F=0;F<ae.scanlineBlockSize;F++){const _=F+i*ae.scanlineBlockSize;if(_>=ae.height)break;for(let O=0;O<ae.channels;O++){const L=gs[Jt.channels[O].name];for(let k=0;k<ae.width;k++){Ar.value=(F*(ae.channels*ae.width)+O*ae.width+k)*ae.inputSize;const N=(ae.height-1-_)*(ae.width*ae.outputChannels)+k*ae.outputChannels+L;ae.byteArray[N]=ae.getter(M,Ar)}}}}return{header:Jt,width:ae.width,height:ae.height,data:ae.byteArray,format:ae.format,[jt?"colorSpace":"encoding"]:ae[jt?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){function s(o,l){jt?o.colorSpace=l.colorSpace:o.encoding=l.encoding,o.minFilter=we,o.magFilter=we,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,l)}return super.load(e,s,n,r)}}const Pn=new WeakMap;class mi extends Wn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new lt(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const u=t.attributeTypes[c];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=u.name)}const n=JSON.stringify(t);if(Pn.has(e)){const c=Pn.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(c=>(r=c,new Promise((u,d)=>{r._callbacks[s]={resolve:u,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Pn.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new Or;e.index&&t.setIndex(new Zt(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,l=r.itemSize;t.setAttribute(s,new Zt(o,l))}return t}_loadLibrary(e,t){const n=new lt(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=fi.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function fi(){let a,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":a=l.decoderConfig,e=new Promise(function(d){a.onModuleLoaded=function(A){d({draco:A})},DracoDecoderModule(a)});break;case"decode":const c=l.buffer,u=l.taskConfig;e.then(d=>{const A=d.draco,m=new A.Decoder,B=new A.DecoderBuffer;B.Init(new Int8Array(c),c.byteLength);try{const C=t(A,m,B,u),v=C.attributes.map(g=>g.array.buffer);C.index&&v.push(C.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:C},v)}catch(C){console.error(C),self.postMessage({type:"error",id:l.id,error:C.message})}finally{A.destroy(B),A.destroy(m)}});break}};function t(o,l,c,u){const d=u.attributeIDs,A=u.attributeTypes;let m,B;const C=l.GetEncodedGeometryType(c);if(C===o.TRIANGULAR_MESH)m=new o.Mesh,B=l.DecodeBufferToMesh(c,m);else if(C===o.POINT_CLOUD)m=new o.PointCloud,B=l.DecodeBufferToPointCloud(c,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!B.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+B.error_msg());const v={index:null,attributes:[]};for(const g in d){const I=self[A[g]];let R,S;if(u.useUniqueIDs)S=d[g],R=l.GetAttributeByUniqueId(m,S);else{if(S=l.GetAttributeId(m,o[d[g]]),S===-1)continue;R=l.GetAttribute(m,S)}v.attributes.push(r(o,l,m,g,I,R))}return C===o.TRIANGULAR_MESH&&(v.index=n(o,l,m)),o.destroy(m),v}function n(o,l,c){const d=c.num_faces()*3,A=d*4,m=o._malloc(A);l.GetTrianglesUInt32Array(c,A,m);const B=new Uint32Array(o.HEAPF32.buffer,m,d).slice();return o._free(m),{array:B,itemSize:1}}function r(o,l,c,u,d,A){const m=A.num_components(),C=c.num_points()*m,v=C*d.BYTES_PER_ELEMENT,g=s(o,d),I=o._malloc(v);l.GetAttributeDataArrayForAllPoints(c,A,g,v,I);const R=new d(o.HEAPF32.buffer,I,C).slice();return o._free(I),{name:u,array:R,itemSize:m}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let mn;const On=()=>{if(mn)return mn;const a="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",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=a;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(l(r),{}).then(A=>{s=A.instance,s.exports.__wasm_call_ctors()});function l(A){const m=new Uint8Array(A.length);for(let C=0;C<A.length;++C){const v=A.charCodeAt(C);m[C]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let B=0;for(let C=0;C<A.length;++C)m[B++]=m[C]<60?n[m[C]]:(m[C]-60)*64+m[++C];return m.buffer.slice(0,B)}function c(A,m,B,C,v,g){const I=s.exports.sbrk,R=B+3&-4,S=I(R*C),G=I(v.length),T=new Uint8Array(s.exports.memory.buffer);T.set(v,G);const E=A(S,B,C,G,v.length);if(E===0&&g&&g(S,R,C),m.set(T.subarray(S,S+B*C)),I(S-I(0)),E!==0)throw new Error(`Malformed buffer data: ${E}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return mn={ready:o,supported:!0,decodeVertexBuffer(A,m,B,C,v){c(s.exports.meshopt_decodeVertexBuffer,A,m,B,C,s.exports[u[v]])},decodeIndexBuffer(A,m,B,C){c(s.exports.meshopt_decodeIndexBuffer,A,m,B,C)},decodeIndexSequence(A,m,B,C){c(s.exports.meshopt_decodeIndexSequence,A,m,B,C)},decodeGltfBuffer(A,m,B,C,v,g){c(s.exports[d[v]],A,m,B,C,s.exports[u[g]])}},mn};function rs(a,e,t,n){const r=class extends St{constructor(o={}){const l=Object.entries(a);super({uniforms:l.reduce((c,[u,d])=>{const A=zs.clone({[u]:{value:d}});return{...c,...A}},{}),vertexShader:e,fragmentShader:t}),this.key="",l.forEach(([c])=>Object.defineProperty(this,c,{get:()=>this.uniforms[c].value,set:u=>this.uniforms[c].value=u})),Object.assign(this,o)}};return r.key=Yt.generateUUID(),r}const pi=()=>parseInt(Yn.replace(/\D+/g,"")),ss=pi();let fn=null,os="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function as(a=!0,e=!0,t){return n=>{t&&t(n),a&&(fn||(fn=new mi),fn.setDecoderPath(typeof a=="string"?a:os),n.setDRACOLoader(fn)),e&&n.setMeshoptDecoder(typeof On=="function"?On():On)}}const st=(a,e,t,n)=>vt(er,a,as(e,t,n));st.preload=(a,e,t,n)=>vt.preload(er,a,as(e,t,n));st.clear=a=>vt.clear(er,a);st.setDecoderPath=a=>{os=a};function Bi(a,e,t){const n=pe(m=>m.size),r=pe(m=>m.viewport),s=typeof a=="number"?a:n.width*r.dpr,o=n.height*r.dpr,l=(typeof a=="number"?t:a)||{},{samples:c=0,depth:u,...d}=l,A=D.useMemo(()=>{const m=new Et(s,o,{minFilter:we,magFilter:we,type:Se,...d});return u&&(m.depthTexture=new qs(s,o,We)),m.samples=c,m},[]);return D.useLayoutEffect(()=>{A.setSize(s,o),c&&(A.samples=c)},[c,A,s,o]),D.useEffect(()=>()=>A.dispose(),[]),A}const gi=a=>typeof a=="function",tr=D.forwardRef(({envMap:a,resolution:e=256,frames:t=1/0,makeDefault:n,children:r,...s},o)=>{const l=pe(({set:g})=>g),c=pe(({camera:g})=>g),u=pe(({size:g})=>g),d=D.useRef(null);D.useImperativeHandle(o,()=>d.current,[]);const A=D.useRef(null),m=Bi(e);D.useLayoutEffect(()=>{s.manual||(d.current.aspect=u.width/u.height)},[u,s]),D.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let B=0,C=null;const v=gi(r);return Lt(g=>{v&&(t===1/0||B<t)&&(A.current.visible=!1,g.gl.setRenderTarget(m),C=g.scene.background,a&&(g.scene.background=a),g.gl.render(g.scene,d.current),g.scene.background=C,g.gl.setRenderTarget(null),A.current.visible=!0,B++)}),D.useLayoutEffect(()=>{if(n){const g=c;return l(()=>({camera:d.current})),()=>l(()=>({camera:g}))}},[d,n,l]),D.createElement(D.Fragment,null,D.createElement("perspectiveCamera",Ye({ref:d},s),!v&&r),D.createElement("group",{ref:A},v&&r(m.texture)))}),nr=D.forwardRef(({makeDefault:a,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:c,...u},d)=>{const A=pe(E=>E.invalidate),m=pe(E=>E.camera),B=pe(E=>E.gl),C=pe(E=>E.events),v=pe(E=>E.setEvents),g=pe(E=>E.set),I=pe(E=>E.get),R=pe(E=>E.performance),S=e||m,G=n||C.connected||B.domElement,T=D.useMemo(()=>new Ta(S),[S]);return Lt(()=>{T.enabled&&T.update()},-1),D.useEffect(()=>(s&&T.connect(s===!0?G:s),T.connect(G),()=>void T.dispose()),[s,G,t,T,A]),D.useEffect(()=>{const E=x=>{A(),t&&R.regress(),o&&o(x)},w=x=>{l&&l(x)},b=x=>{c&&c(x)};return T.addEventListener("change",E),T.addEventListener("start",w),T.addEventListener("end",b),()=>{T.removeEventListener("start",w),T.removeEventListener("end",b),T.removeEventListener("change",E)}},[o,l,c,T,A,v]),D.useEffect(()=>{if(a){const E=I().controls;return g({controls:T}),()=>g({controls:E})}},[a,T]),D.createElement("primitive",Ye({ref:d,object:T,enableDamping:r},u))}),Ci=D.forwardRef(function({children:e,disable:t,disableX:n,disableY:r,disableZ:s,left:o,right:l,top:c,bottom:u,front:d,back:A,onCentered:m,precise:B=!0,cacheKey:C=0,...v},g){const I=D.useRef(null),R=D.useRef(null),S=D.useRef(null);return D.useLayoutEffect(()=>{R.current.matrixWorld.identity();const G=new Vn().setFromObject(S.current,B),T=new ee,E=new Jr,w=G.max.x-G.min.x,b=G.max.y-G.min.y,x=G.max.z-G.min.z;G.getCenter(T),G.getBoundingSphere(E);const P=c?b/2:u?-b/2:0,Z=o?-w/2:l?w/2:0,z=d?x/2:A?-x/2:0;R.current.position.set(t||n?0:-T.x+Z,t||r?0:-T.y+P,t||s?0:-T.z+z),typeof m<"u"&&m({parent:I.current.parent,container:I.current,width:w,height:b,depth:x,boundingBox:G,boundingSphere:E,center:T,verticalAlignment:P,horizontalAlignment:Z,depthAlignment:z})},[C,m,c,o,d,t,n,r,s,B,l,u,A]),D.useImperativeHandle(g,()=>I.current,[]),D.createElement("group",Ye({ref:I},v),D.createElement("group",{ref:R},D.createElement("group",{ref:S},e)))}),vi=3e3,Ei=3001,Mi=rs({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var Je=function(a){return a[a.NONE=0]="NONE",a[a.START=1]="START",a[a.ACTIVE=2]="ACTIVE",a}(Je||{});const Dt=a=>a&&a.isOrthographicCamera,yi=a=>a&&a.isBox3,Ii=a=>1-Math.exp(-5*a)+.007*a,is=D.createContext(null);function Ri({children:a,maxDuration:e=1,margin:t=1.2,observe:n,fit:r,clip:s,interpolateFunc:o=Ii,onFit:l}){const c=D.useRef(null),{camera:u,size:d,invalidate:A}=pe(),m=pe(T=>T.controls),B=D.useRef(l);B.current=l;const C=D.useRef({camPos:new ee,camRot:new gt,camZoom:1}),v=D.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),g=D.useRef(Je.NONE),I=D.useRef(0),[R]=D.useState(()=>new Vn),S=D.useMemo(()=>{function T(){const E=R.getSize(new ee),w=R.getCenter(new ee),b=Math.max(E.x,E.y,E.z),x=Dt(u)?b*4:b/(2*Math.atan(Math.PI*u.fov/360)),P=Dt(u)?b*4:x/u.aspect,Z=t*Math.max(x,P);return{box:R,size:E,center:w,distance:Z}}return{getSize:T,refresh(E){if(yi(E))R.copy(E);else{const w=E||c.current;if(!w)return this;w.updateWorldMatrix(!0,!0),R.setFromObject(w)}if(R.isEmpty()){const w=u.position.length()||10;R.setFromCenterAndSize(new ee,new ee(w,w,w))}return C.current.camPos.copy(u.position),C.current.camRot.copy(u.quaternion),Dt(u)&&(C.current.camZoom=u.zoom),v.current.camPos=void 0,v.current.camRot=void 0,v.current.camZoom=void 0,v.current.camUp=void 0,v.current.target=void 0,this},reset(){const{center:E,distance:w}=T(),b=u.position.clone().sub(E).normalize();v.current.camPos=E.clone().addScaledVector(b,w),v.current.target=E.clone();const x=new Ct().lookAt(v.current.camPos,v.current.target,u.up);return v.current.camRot=new gt().setFromRotationMatrix(x),g.current=Je.START,I.current=0,this},moveTo(E){return v.current.camPos=Array.isArray(E)?new ee(...E):E.clone(),g.current=Je.START,I.current=0,this},lookAt({target:E,up:w}){v.current.target=Array.isArray(E)?new ee(...E):E.clone(),w?v.current.camUp=Array.isArray(w)?new ee(...w):w.clone():v.current.camUp=u.up.clone();const b=new Ct().lookAt(v.current.camPos||u.position,v.current.target,v.current.camUp);return v.current.camRot=new gt().setFromRotationMatrix(b),g.current=Je.START,I.current=0,this},to({position:E,target:w}){return this.moveTo(E).lookAt({target:w})},fit(){if(!Dt(u))return this.reset();let E=0,w=0;const b=[new ee(R.min.x,R.min.y,R.min.z),new ee(R.min.x,R.max.y,R.min.z),new ee(R.min.x,R.min.y,R.max.z),new ee(R.min.x,R.max.y,R.max.z),new ee(R.max.x,R.max.y,R.max.z),new ee(R.max.x,R.max.y,R.min.z),new ee(R.max.x,R.min.y,R.max.z),new ee(R.max.x,R.min.y,R.min.z)],x=v.current.camPos||u.position,P=v.current.target||(m==null?void 0:m.target),Z=v.current.camUp||u.up,z=P?new Ct().lookAt(x,P,Z).setPosition(x).invert():u.matrixWorldInverse;for(const ne of b)ne.applyMatrix4(z),E=Math.max(E,Math.abs(ne.y)),w=Math.max(w,Math.abs(ne.x));E*=2,w*=2;const V=(u.top-u.bottom)/E,K=(u.right-u.left)/w;return v.current.camZoom=Math.min(V,K)/t,g.current=Je.START,I.current=0,B.current&&B.current(this.getSize()),this},clip(){const{distance:E}=T();return u.near=E/100,u.far=E*100,u.updateProjectionMatrix(),m&&(m.maxDistance=E*10,m.update()),A(),this}}},[R,u,m,t,A]);D.useLayoutEffect(()=>{if(m){const T=()=>{if(m&&v.current.target&&g.current!==Je.NONE){const E=new ee().setFromMatrixColumn(u.matrix,2),w=C.current.camPos.distanceTo(m.target),b=(v.current.camPos||C.current.camPos).distanceTo(v.current.target),x=(1-I.current)*w+I.current*b;m.target.copy(u.position).addScaledVector(E,-x),m.update()}g.current=Je.NONE};return m.addEventListener("start",T),()=>m.removeEventListener("start",T)}},[m]);const G=D.useRef(0);return D.useLayoutEffect(()=>{(n||G.current++===0)&&(S.refresh(),r&&S.reset().fit(),s&&S.clip())},[d,s,r,n,u,m]),Lt((T,E)=>{if(g.current===Je.START)g.current=Je.ACTIVE,A();else if(g.current===Je.ACTIVE){if(I.current+=E/e,I.current>=1)v.current.camPos&&u.position.copy(v.current.camPos),v.current.camRot&&u.quaternion.copy(v.current.camRot),v.current.camUp&&u.up.copy(v.current.camUp),v.current.camZoom&&Dt(u)&&(u.zoom=v.current.camZoom),u.updateMatrixWorld(),u.updateProjectionMatrix(),m&&v.current.target&&(m.target.copy(v.current.target),m.update()),g.current=Je.NONE;else{const w=o(I.current);v.current.camPos&&u.position.lerpVectors(C.current.camPos,v.current.camPos,w),v.current.camRot&&u.quaternion.slerpQuaternions(C.current.camRot,v.current.camRot,w),v.current.camUp&&u.up.set(0,1,0).applyQuaternion(u.quaternion),v.current.camZoom&&Dt(u)&&(u.zoom=(1-w)*C.current.camZoom+w*v.current.camZoom),u.updateMatrixWorld(),u.updateProjectionMatrix()}A()}}),D.createElement("group",{ref:c},D.createElement(is.Provider,{value:S},a))}function Fi(){return D.useContext(is)}const cs=(a,e,t)=>{let n;switch(a){case jn:n=new Uint8ClampedArray(e*t*4);break;case Se:n=new Uint16Array(e*t*4);break;case so:n=new Uint32Array(e*t*4);break;case ro:n=new Int8Array(e*t*4);break;case no:n=new Int16Array(e*t*4);break;case to:n=new Int32Array(e*t*4);break;case We:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let pn;const _i=(a,e,t,n)=>{if(pn!==void 0)return pn;const r=new Et(1,1,n);e.setRenderTarget(r);const s=new qt(new zn,new bt({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=cs(a,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),pn=o[0]!==0,pn};class rr{constructor(e){var t,n,r,s,o,l,c,u,d,A,m,B,C,v,g,I;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const R={format:Vt,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter:we,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:we,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.samples:void 0,wrapS:((m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS)!==void 0?(B=e.renderTargetOptions)===null||B===void 0?void 0:B.wrapS:tt,wrapT:((C=e.renderTargetOptions)===null||C===void 0?void 0:C.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:tt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=rr.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new kr,this._camera=new Qt,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!_i(this._type,this._renderer,this._camera,R)){let S;switch(this._type){case Se:S=this._renderer.extensions.has("EXT_color_buffer_float")?We:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${We}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new qt(new zn,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Et(this.width,this.height,R),this._renderTarget.texture.mapping=((g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping)!==void 0?(I=e.renderTargetOptions)===null||I===void 0?void 0:I.mapping:gn}static instantiateRenderer(){const e=new $s;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=cs(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new eo(this.toArray(),this.width,this.height,Vt,this._type,(e==null?void 0:e.mapping)||gn,(e==null?void 0:e.wrapS)||tt,(e==null?void 0:e.wrapT)||tt,(e==null?void 0:e.magFilter)||we,(e==null?void 0:e.minFilter)||we,(e==null?void 0:e.anisotropy)||1,kn);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof St&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof nt&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof nt&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Ti=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Di=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class bi extends St{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:l,hdrCapacityMax:c,sdr:u,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:Ti,fragmentShader:Di,uniforms:{sdr:{value:u},gainMap:{value:d},gamma:{value:new ee(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ee().fromArray(t)},offsetSdr:{value:new ee().fromArray(n)},gainMapMin:{value:new ee().fromArray(r)},gainMapMax:{value:new ee().fromArray(s)},weightFactor:{value:(Math.log2(o)-l)/(c-l)}},blending:io,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=l,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class ls extends Error{}class us extends Error{}const Kt=(a,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(a);if(n)return n[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(a);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},xi=a=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(a):e=a.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),r=e.slice(t,n+10);try{const s=Kt(r,"hdrgm:GainMapMin","0"),o=Kt(r,"hdrgm:GainMapMax"),l=Kt(r,"hdrgm:Gamma","1"),c=Kt(r,"hdrgm:OffsetSDR","0.015625"),u=Kt(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),A=d?d[1]:"0",m=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!m)throw new Error("Incomplete gainmap metadata");const B=m[1];return{gainMapMin:Array.isArray(s)?s.map(C=>parseFloat(C)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(C=>parseFloat(C)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(l)?l.map(C=>parseFloat(C)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(c)?c.map(C=>parseFloat(C)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(u)?u.map(C=>parseFloat(C)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(A),hdrCapacityMax:parseFloat(B)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class Gi{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=s.byteLength;let l=2,c=0,u;for(;l<o;){if(++c>250){n(new Error(`Found no marker after ${c} loops 😵`));return}if(s.getUint8(l)!==255){n(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${s.getUint8(l).toString(16)}`));return}if(u=s.getUint8(l+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const d=l+4;if(s.getUint32(d)===1297106432){const A=d+4;let m;if(s.getUint16(A)===18761)m=!1;else if(s.getUint16(A)===19789)m=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(A+2,!m)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const B=s.getUint32(A+4,!m);if(B<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const C=A+B,v=s.getUint16(C,!m),g=C+2;let I=0;for(let T=g;T<g+12*v;T+=12)s.getUint16(T,!m)===45057&&(I=s.getUint32(T+8,!m));const S=C+2+v*12+4,G=[];for(let T=S;T<S+I*16;T+=16){const E={MPType:s.getUint32(T,!m),size:s.getUint32(T+4,!m),dataOffset:s.getUint32(T+8,!m),dependantImages:s.getUint32(T+12,!m),start:-1,end:-1,isFII:!1};E.dataOffset?(E.start=A+E.dataOffset,E.isFII=!1):(E.start=0,E.isFII=!0),E.end=E.start+E.size,G.push(E)}if(this.options.extractNonFII&&G.length){const T=new Blob([s]),E=[];for(const w of G){if(w.isFII&&!this.options.extractFII)continue;const b=T.slice(w.start,w.end+1,"image/jpeg");E.push(b)}t(E)}}}l+=2+s.getUint16(l+2)}})}}const wi=async a=>{const e=xi(a);if(!e)throw new us("Gain map XMP metadata not found");const n=await new Gi({extractFII:!0,extractNonFII:!0}).extract(a);if(n.length!==2)throw new ls("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},br=a=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=r=>{t(r)},n.src=URL.createObjectURL(a)});class hs extends Wn{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new oo}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new bi({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new nt,sdr:new nt});return new rr({width:16,height:16,type:Se,colorSpace:kn,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([n],{type:"image/jpeg"});let l,c,u=!1;if(typeof createImageBitmap>"u"){const m=await Promise.all([s?br(s):Promise.resolve(void 0),br(o)]);c=m[0],l=m[1],u=!0}else{const m=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);c=m[0],l=m[1]}const d=new nt(c||new ImageData(2,2),gn,tt,tt,we,Br,Vt,jn,1,kn);d.flipY=u,d.needsUpdate=!0;const A=new nt(l,gn,tt,tt,we,Br,Vt,jn,1,ao);A.flipY=u,A.needsUpdate=!0,e.width=l.width,e.height=l.height,e.material.gainMap=d,e.material.sdr=A,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Si extends hs{load([e,t,n],r,s,o){const l=this.prepareQuadRenderer();let c,u,d;const A=async()=>{if(c&&u&&d){try{await this.render(l,d,c,u)}catch(x){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(x),l.disposeOnDemandRenderer();return}typeof r=="function"&&r(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),l.disposeOnDemandRenderer()}};let m=!0,B=0,C=0,v=!0,g=0,I=0,R=!0,S=0,G=0;const T=()=>{if(typeof s=="function"){const x=B+g+S,P=C+I+G,Z=m&&v&&R;s(new ProgressEvent("progress",{lengthComputable:Z,loaded:P,total:x}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const E=new lt(this._internalLoadingManager);E.setResponseType("arraybuffer"),E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(this.withCredentials),E.load(e,async x=>{if(typeof x=="string")throw new Error("Invalid sdr buffer");c=x,await A()},x=>{m=x.lengthComputable,C=x.loaded,B=x.total,T()},x=>{this.manager.itemError(e),typeof o=="function"&&o(x)});const w=new lt(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(t,async x=>{if(typeof x=="string")throw new Error("Invalid gainmap buffer");u=x,await A()},x=>{v=x.lengthComputable,I=x.loaded,g=x.total,T()},x=>{this.manager.itemError(t),typeof o=="function"&&o(x)});const b=new lt(this._internalLoadingManager);return b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(n,async x=>{if(typeof x!="string")throw new Error("Invalid metadata string");d=JSON.parse(x),await A()},x=>{R=x.lengthComputable,G=x.loaded,S=x.total,T()},x=>{this.manager.itemError(n),typeof o=="function"&&o(x)}),l}}class Li extends hs{load(e,t,n,r){const s=this.prepareQuadRenderer(),o=new lt(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(l);let u,d,A;try{const m=await wi(c);u=m.sdr,d=m.gainMap,A=m.metadata}catch(m){if(m instanceof us||m instanceof ls)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),A={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=c;else throw m}try{await this.render(s,A,u,d)}catch(m){this.manager.itemError(e),typeof r=="function"&&r(m),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,l=>{this.manager.itemError(e),typeof r=="function"&&r(l)}),s}}const zt={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},As="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",wt=a=>Array.isArray(a),sr=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function En({files:a=sr,path:e="",preset:t=void 0,encoding:n=void 0,extensions:r}={}){let s=null,o=!1;t&&(or(t),a=zt[t],e=As),o=wt(a);const{extension:l,isCubemap:c}=ar(a);if(s=ir(l),!s)throw new Error("useEnvironment: Unrecognized file extension: "+a);const u=pe(B=>B.gl);D.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function B(){vt.clear(s,o?[a]:a)}u.domElement.addEventListener("webglcontextlost",B,{once:!0})},[a,u.domElement]);const d=vt(s,o?[a]:a,B=>{(l==="webp"||l==="jpg"||l==="jpeg")&&B.setRenderer(u),B.setPath==null||B.setPath(e),r&&r(B)});let A=o?d[0]:d;if(l==="jpg"||l==="jpeg"||l==="webp"){var m;A=(m=A.renderTarget)==null?void 0:m.texture}return A.mapping=c?co:lo,"colorSpace"in A?A.colorSpace=n??c?"srgb":"srgb-linear":A.encoding=n??c?Ei:vi,A}const Hi={files:sr,path:"",preset:void 0,extensions:void 0};En.preload=a=>{const e={...Hi,...a};let{files:t,path:n=""}=e;const{preset:r,extensions:s}=e;r&&(or(r),t=zt[r],n=As);const{extension:o}=ar(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=ir(o);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);vt.preload(l,wt(t)?[t]:t,c=>{c.setPath==null||c.setPath(n),s&&s(c)})};const Pi={files:sr,preset:void 0};En.clear=a=>{const e={...Pi,...a};let{files:t}=e;const{preset:n}=e;n&&(or(n),t=zt[n]);const{extension:r}=ar(t),s=ir(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);vt.clear(s,wt(t)?[t]:t)};function or(a){if(!(a in zt))throw new Error("Preset must be one of: "+Object.keys(zt).join(", "))}function ar(a){var e;const t=wt(a)&&a.length===6,n=wt(a)&&a.length===3&&a.some(o=>o.endsWith("json")),r=wt(a)?a[0]:a;return{extension:t?"cube":n?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function ir(a){return a==="cube"?uo:a==="hdr"?Ai:a==="exr"?di:a==="jpg"||a==="jpeg"?Li:a==="webp"?Si:null}const Oi=a=>a.current&&a.current.isScene,Ui=a=>Oi(a)?a.current:a;function cr(a,e,t,n,r={}){var s,o,l,c;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=Ui(e||t),d=u.background,A=u.environment,m={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(o=u.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return a!=="only"&&(u.environment=n),a&&(u.background=n),gr(u,r),()=>{a!=="only"&&(u.environment=A),a&&(u.background=d),gr(u,m)}}function lr({scene:a,background:e=!1,map:t,...n}){const r=pe(s=>s.scene);return D.useLayoutEffect(()=>{if(t)return cr(e,a,r,t,n)}),null}function ds({background:a=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:l,...c}){const u=En(c),d=pe(A=>A.scene);return D.useLayoutEffect(()=>cr(a,e,d,u,{backgroundBlurriness:t??n,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:l})),null}function Ji({children:a,near:e=.1,far:t=1e3,resolution:n=256,frames:r=1,map:s,background:o=!1,blur:l,backgroundBlurriness:c,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:A,environmentRotation:m,scene:B,files:C,path:v,preset:g=void 0,extensions:I}){const R=pe(b=>b.gl),S=pe(b=>b.scene),G=D.useRef(null),[T]=D.useState(()=>new kr),E=D.useMemo(()=>{const b=new ho(n);return b.texture.type=Se,b},[n]);D.useLayoutEffect(()=>{if(r===1){const b=R.autoClear;R.autoClear=!0,G.current.update(R,T),R.autoClear=b}return cr(o,B,S,E.texture,{backgroundBlurriness:l??c,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:A,environmentRotation:m})},[a,T,E.texture,B,S,o,r,R]);let w=1;return Lt(()=>{if(r===1/0||w<r){const b=R.autoClear;R.autoClear=!0,G.current.update(R,T),R.autoClear=b,w++}}),D.createElement(D.Fragment,null,Ao(D.createElement(D.Fragment,null,a,D.createElement("cubeCamera",{ref:G,args:[e,t,E]}),C||g?D.createElement(ds,{background:!0,files:C,preset:g,path:v,extensions:I}):s?D.createElement(lr,{background:!0,map:s,extensions:I}):null),T))}function Ni(a){var e,t,n,r;const s=En(a),o=a.map||s;D.useMemo(()=>jr({GroundProjectedEnvImpl:va}),[]);const l=D.useMemo(()=>[o],[o]),c=(e=a.ground)==null?void 0:e.height,u=(t=a.ground)==null?void 0:t.radius,d=(n=(r=a.ground)==null?void 0:r.scale)!==null&&n!==void 0?n:1e3;return D.createElement(D.Fragment,null,D.createElement(lr,Ye({},a,{map:o})),D.createElement("groundProjectedEnvImpl",{args:l,scale:d,height:c,radius:u}))}function ki(a){return a.ground?D.createElement(Ni,a):a.map?D.createElement(lr,a):a.children?D.createElement(Ji,a):D.createElement(ds,a)}const ji=D.forwardRef(({scale:a=10,frames:e=1/0,opacity:t=1,width:n=1,height:r=1,blur:s=1,near:o=0,far:l=10,resolution:c=512,smooth:u=!0,color:d="#000000",depthWrite:A=!1,renderOrder:m,...B},C)=>{const v=D.useRef(null),g=pe(K=>K.scene),I=pe(K=>K.gl),R=D.useRef(null);n=n*(Array.isArray(a)?a[0]:a||1),r=r*(Array.isArray(a)?a[1]:a||1);const[S,G,T,E,w,b,x]=D.useMemo(()=>{const K=new Et(c,c),ne=new Et(c,c);ne.texture.generateMipmaps=K.texture.generateMipmaps=!1;const q=new zn(n,r).rotateX(Math.PI/2),he=new qt(q),ce=new mo;ce.depthTest=ce.depthWrite=!1,ce.onBeforeCompile=Me=>{Me.uniforms={...Me.uniforms,ucolor:{value:new Ve(d)}},Me.fragmentShader=Me.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Me.fragmentShader=Me.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const ye=new St(ui),se=new St(hi);return se.depthTest=ye.depthTest=!1,[K,q,ce,he,ye,se,ne]},[c,n,r,a,d]),P=K=>{E.visible=!0,E.material=w,w.uniforms.tDiffuse.value=S.texture,w.uniforms.h.value=K*1/256,I.setRenderTarget(x),I.render(E,R.current),E.material=b,b.uniforms.tDiffuse.value=x.texture,b.uniforms.v.value=K*1/256,I.setRenderTarget(S),I.render(E,R.current),E.visible=!1};let Z=0,z,V;return Lt(()=>{R.current&&(e===1/0||Z<e)&&(Z++,z=g.background,V=g.overrideMaterial,v.current.visible=!1,g.background=null,g.overrideMaterial=T,I.setRenderTarget(S),I.render(g,R.current),P(s),u&&P(s*.4),I.setRenderTarget(null),v.current.visible=!0,g.overrideMaterial=V,g.background=z)}),D.useImperativeHandle(C,()=>v.current,[]),D.createElement("group",Ye({"rotation-x":Math.PI/2},B,{ref:v}),D.createElement("mesh",{renderOrder:m,geometry:G,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},D.createElement("meshBasicMaterial",{transparent:!0,map:S.texture,opacity:t,depthWrite:A})),D.createElement("orthographicCamera",{ref:R,args:[-n/2,n/2,r/2,-r/2,o,l]}))});function Ki(a){return a.isLight}function Qi(a){return!!a.geometry}const ms=D.createContext(null),Xi=rs({color:new Ve,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${ss>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),Zi=D.forwardRef(({children:a,temporal:e,frames:t=40,limit:n=1/0,blend:r=20,scale:s=10,opacity:o=1,alphaTest:l=.75,color:c="black",colorBlend:u=2,resolution:d=1024,toneMapped:A=!0,...m},B)=>{jr({SoftShadowMaterial:Xi});const C=pe(E=>E.gl),v=pe(E=>E.scene),g=pe(E=>E.camera),I=pe(E=>E.invalidate),R=D.useRef(null),S=D.useRef(null),[G]=D.useState(()=>new Wi(C,v,d));D.useLayoutEffect(()=>{G.configure(R.current)},[]);const T=D.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?r:t),count:0,getMesh:()=>R.current,reset:()=>{G.clear();const E=R.current.material;E.opacity=0,E.alphaTest=0,T.count=0},update:(E=1)=>{const w=R.current.material;T.temporal?(w.opacity=Math.min(o,w.opacity+o/T.blend),w.alphaTest=Math.min(l,w.alphaTest+l/T.blend)):(w.opacity=o,w.alphaTest=l),S.current.visible=!0,G.prepare();for(let b=0;b<E;b++)T.lights.forEach(x=>x.update()),G.update(g,T.blend);S.current.visible=!1,G.finish()}}),[G,g,v,e,t,r,o,l]);return D.useLayoutEffect(()=>{T.reset(),!T.temporal&&T.frames!==1/0&&T.update(T.blend)}),D.useImperativeHandle(B,()=>T,[T]),Lt(()=>{(T.temporal||T.frames===1/0)&&T.count<T.frames&&T.count<n&&(I(),T.update(),T.count++)}),D.createElement("group",m,D.createElement("group",{traverse:()=>null,ref:S},D.createElement(ms.Provider,{value:T},a)),D.createElement("mesh",{receiveShadow:!0,ref:R,scale:s,rotation:[-Math.PI/2,0,0]},D.createElement("planeGeometry",null),D.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:A,color:c,blend:u,map:G.progressiveLightMap2.texture})))}),Yi=D.forwardRef(({castShadow:a=!0,bias:e=.001,mapSize:t=512,size:n=5,near:r=.5,far:s=500,frames:o=1,position:l=[0,0,0],radius:c=1,amount:u=8,intensity:d=ss>=155?Math.PI:1,ambient:A=.5,...m},B)=>{const C=D.useRef(null),v=new ee(...l).length(),g=D.useContext(ms),I=D.useCallback(()=>{let S;if(C.current)for(let G=0;G<C.current.children.length;G++)if(S=C.current.children[G],Math.random()>A)S.position.set(l[0]+Yt.randFloatSpread(c),l[1]+Yt.randFloatSpread(c),l[2]+Yt.randFloatSpread(c));else{let T=Math.acos(2*Math.random()-1)-Math.PI/2,E=2*Math.PI*Math.random();S.position.set(Math.cos(T)*Math.cos(E)*v,Math.abs(Math.cos(T)*Math.sin(E)*v),Math.sin(T)*v)}},[c,A,v,...l]),R=D.useMemo(()=>({update:I}),[I]);return D.useImperativeHandle(B,()=>R,[R]),D.useLayoutEffect(()=>{var S;const G=C.current;return g&&((S=g.lights)==null||S.set(G.uuid,R)),()=>{var T;return void(g==null||(T=g.lights)==null?void 0:T.delete(G.uuid))}},[g,R]),D.createElement("group",Ye({ref:C},m),Array.from({length:u},(S,G)=>D.createElement("directionalLight",{key:G,castShadow:a,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:d/u},D.createElement("orthographicCamera",{attach:"shadow-camera",args:[-n,n,n,-n,r,s]}))))});class Wi{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new Ve,this.clearAlpha=0;const r={type:Se,magFilter:Nn,minFilter:Nn};this.progressiveLightMap1=new Et(this.res,this.res,r),this.progressiveLightMap2=new Et(this.res,this.res,r),this.discardMat=new Mi,this.targetMat=new fo({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{Qi(e)?this.meshes.push({object:e,material:e.material}):Ki(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const Vi={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function zi({radius:a,adjustCamera:e}){const t=Fi();return D.useEffect(()=>{e&&t.refresh().clip().fit()},[a,e]),null}function ur({children:a,center:e,adjustCamera:t=!0,intensity:n=.5,shadows:r="contact",environment:s="city",preset:o="rembrandt",...l}){var c,u,d,A,m,B,C,v;const g=typeof o=="string"?Vi[o]:o,[{radius:I,height:R},S]=D.useState({radius:0,width:0,height:0,depth:0}),G=(c=r==null?void 0:r.bias)!==null&&c!==void 0?c:-1e-4,T=(u=r==null?void 0:r.normalBias)!==null&&u!==void 0?u:0,E=(d=r==null?void 0:r.size)!==null&&d!==void 0?d:1024,w=(A=r==null?void 0:r.offset)!==null&&A!==void 0?A:0,b=r==="contact"||(r==null?void 0:r.type)==="contact",x=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",P={...typeof r=="object"?r:{}},Z=s?typeof s=="string"?{preset:s}:s:null,z=D.useCallback(V=>{const{width:K,height:ne,depth:q,boundingSphere:he}=V;S({radius:he.radius,width:K,height:ne,depth:q}),e!=null&&e.onCentered&&e.onCentered(V)},[]);return D.createElement(D.Fragment,null,D.createElement("ambientLight",{intensity:n/3}),D.createElement("spotLight",{penumbra:1,position:[g.main[0]*I,g.main[1]*I,g.main[2]*I],intensity:n*2,castShadow:!!r,"shadow-bias":G,"shadow-normalBias":T,"shadow-mapSize":E}),D.createElement("pointLight",{position:[g.fill[0]*I,g.fill[1]*I,g.fill[2]*I],intensity:n}),D.createElement(Ri,Ye({fit:!!t,clip:!!t,margin:Number(t),observe:!0},l),D.createElement(zi,{radius:I,adjustCamera:t}),D.createElement(Ci,Ye({},e,{position:[0,w/2,0],onCentered:z}),a)),D.createElement("group",{position:[0,-R/2-w/2,0]},b&&D.createElement(ji,Ye({scale:I*4,far:I,blur:2},P)),x&&D.createElement(Zi,Ye({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:I*4},P),D.createElement(Yi,{amount:(m=P.amount)!==null&&m!==void 0?m:8,radius:(B=P.radius)!==null&&B!==void 0?B:I,ambient:(C=P.ambient)!==null&&C!==void 0?C:.5,intensity:(v=P.intensity)!==null&&v!==void 0?v:1,position:[g.main[0]*I,g.main[1]*I,g.main[2]*I],size:I*4,bias:-G,mapSize:E}))),s&&D.createElement(ki,Z))}function qi(a){const{nodes:e,materials:t}=st("/PortfolioJ//computerModel.glb");return y.jsxs("group",{...a,dispose:null,children:[y.jsxs("group",{position:[.121,.007,0],children:[y.jsx("mesh",{geometry:e.Object_6.geometry,material:t.MacBookPro}),y.jsx("mesh",{geometry:e.Object_8.geometry,material:t.MacBookPro})]}),y.jsx("mesh",{geometry:e.Object_4.geometry,material:t.MacBookPro})]})}st.preload("/PortfolioJ//computerModel.glb");const $i=()=>y.jsx(qn,{children:y.jsxs(D.Suspense,{fallback:"loading...",children:[y.jsx(ur,{environment:"night",intensity:.5,children:y.jsx(qi,{})}),y.jsx(nr,{enableZoom:!1,autoRotate:!0}),y.jsx(tr,{position:[-1,0,1.8],zoom:.8,makeDefault:!0})]})});function ec(a){const{nodes:e,materials:t}=st("/PortfolioJ//consoleModel.glb");return y.jsx("group",{...a,dispose:null,children:y.jsxs("group",{position:[0,-199.067,197.453],rotation:[-1.57,0,0],children:[y.jsx("mesh",{geometry:e.Object_2.geometry,material:t["Glass_-_Heavy_Color"]}),y.jsx("mesh",{geometry:e.Object_3.geometry,material:t["Plastic_-_Textured_-_Regular"]}),y.jsx("mesh",{geometry:e.Object_4.geometry,material:t["Plastic_-_Translucent_Glossy_Blue"]}),y.jsx("mesh",{geometry:e.Object_5.geometry,material:t["Plastic_-_Translucent_Glossy_Gray"]}),y.jsx("mesh",{geometry:e.Object_6.geometry,material:t["Plastic_-_Translucent_Matte_Gray"]}),y.jsx("mesh",{geometry:e.Object_7.geometry,material:t["Plastic_-_Translucent_Matte_Gray_1"]}),y.jsx("mesh",{geometry:e.Object_8.geometry,material:t["Steel_-_Satin"]})]})})}st.preload("/PortfolioJ//consoleModel.glb");const tc=()=>y.jsx(qn,{children:y.jsxs(D.Suspense,{fallback:"loading...",children:[y.jsx(ur,{environment:"night",intensity:.5,children:y.jsx(ec,{})}),y.jsx(nr,{enableZoom:!1,autoRotate:!0}),y.jsx(tr,{position:[-1,0,1.8],zoom:.8,makeDefault:!0})]})});function nc(a){const{nodes:e,materials:t}=st("/PortfolioJ//microscopeModel.glb");return y.jsxs("group",{...a,dispose:null,children:[y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.MicroscopeBase_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Binocular2_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Binocular1_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.BinocularMechanism_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.BinocularLens_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Lens_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.ScrewPlatform_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.ObjectiveLensesConfig_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.ObjectiveLens_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.ObjectiveLenses_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.LightProtection_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.HeadLight_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Diaphragm_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.DiaphragmConfig_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.AbbeCondeser_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.MicroscopeLegs_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.SidePanel_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.OnOffSwitchEdge_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.PowerSupply_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.EnergyTranfer_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.BackPanel_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Handle_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.FineAdjustment_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.CoarseAdjustment_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.DimmingHandWHeel_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.smallDialButton_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.RevolvingNosePiece_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.SlideHolder_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.MechanicalStage_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.FrontBackConfig_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.PlatformConfiguration_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Dimension_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.RulerConfiguration_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.RulerMechanism_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Platform_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.BinocularRotationalHead_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.BinocularRotationSystem_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.Holder_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.HolderRotationSystem_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.MaintainHolder_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.OnOffSwitch_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.RulerLeftRight_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.LensDialSystem_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.BinocularRotationalHeadTop_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})}),y.jsx("group",{position:[0,-.007,0],rotation:[-Math.PI/2,0,0],children:y.jsx("mesh",{geometry:e.smallDialButtonDial_LowPoly__0.geometry,material:t["Scene_-_Root"],position:[0,0,-25.468]})})]})}st.preload("/PortfolioJ//microscopeModel.glb");const rc=()=>y.jsx(qn,{children:y.jsxs(D.Suspense,{fallback:"loading...",children:[y.jsx(ur,{environment:"night",intensity:10,children:y.jsx(nc,{})}),y.jsx(nr,{enableZoom:!1,autoRotate:!0}),y.jsx(tr,{position:[-1,0,-2],zoom:.7,makeDefault:!0})]})}),xr=({from:a,to:e,text:t})=>{const[n,r]=D.useState(a),s=D.useRef(),o=Kr(s);return D.useEffect(()=>{const l=sa(a,e,{duration:4,ease:"easeOut",onUpdate:c=>{r(Math.floor(c))}});return()=>l.cancel()},[o,a,e]),y.jsxs("div",{className:"counter",ref:s,children:[y.jsxs("h1",{children:[n,"+"]}),y.jsx("p",{children:t})]})},sc={initial:{x:-100,y:-100,opacity:0},animate:{x:0,y:0,opacity:1,transition:{duration:1}}},Gr={initial:{x:-100,opacity:0},animate:{x:0,opacity:1,transition:{duration:1,staggerChildren:.5}}},oc=[{id:1,img:"/PortfolioJ/service1.png",title:"Web Development",counter:18},{id:2,img:"/PortfolioJ/service2.png",title:"Product Design",counter:3},{id:3,img:"/PortfolioJ/service3.png",title:"Research Innovation",counter:2}],Ac=()=>{const[a,e]=D.useState(1),t=D.useRef(),n=Kr(t,{margin:"-200px"});return y.jsxs("div",{className:"services",ref:t,children:[y.jsxs("div",{className:"sSection left",children:[y.jsx(xn.h1,{variants:sc,animate:n?"animate":"initial",className:"sTitle",children:"How do I help?"}),y.jsx(xn.div,{variants:Gr,animate:n?"animate":"initial",className:"serviceList",children:oc.map(r=>y.jsxs(xn.div,{variants:Gr,className:"service",onClick:()=>e(r.id),children:[y.jsx("div",{className:"serviceIcon",children:y.jsx("img",{src:r.img,alt:r.title})}),y.jsxs("div",{className:"serviceInfo",children:[y.jsx("h2",{children:r.title}),y.jsxs("h3",{children:[r.counter," Projects"]})]})]},r.id))}),y.jsxs("div",{className:"counterList",children:[y.jsx(xr,{from:0,to:24,text:"Projects Completed"}),y.jsx(xr,{from:0,to:2,text:"Happy Clients"})]})]}),y.jsx("div",{className:"sSection right",children:a===1?y.jsx($i,{}):a===2?y.jsx(tc,{}):y.jsx(rc,{})})]})};export{Ac as default};
